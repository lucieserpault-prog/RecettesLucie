<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Aptos;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
h1
	{mso-style-link:"Titre 1 Car";
	margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:20.0pt;
	font-family:"Aptos Display",sans-serif;
	color:#0F4761;
	font-weight:normal;}
h2
	{mso-style-link:"Titre 2 Car";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Aptos Display",sans-serif;
	color:#0F4761;
	font-weight:normal;}
h3
	{mso-style-link:"Titre 3 Car";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Aptos",sans-serif;
	color:#0F4761;
	font-weight:normal;}
h4
	{mso-style-link:"Titre 4 Car";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#0F4761;
	font-weight:normal;
	font-style:italic;}
h5
	{mso-style-link:"Titre 5 Car";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#0F4761;
	font-weight:normal;}
h6
	{mso-style-link:"Titre 6 Car";
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#595959;
	font-weight:normal;
	font-style:italic;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"Titre 7 Car";
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#595959;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"Titre 8 Car";
	margin:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#272727;
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"Titre 9 Car";
	margin:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#272727;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Titre Car";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Titre Car";
	margin:0cm;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Titre Car";
	margin:0cm;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Titre Car";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	letter-spacing:-.5pt;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"Sous-titre Car";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Aptos",sans-serif;
	color:#595959;
	letter-spacing:.75pt;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-link:"Citation Car";
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#404040;
	font-style:italic;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-link:"Citation intense Car";
	margin-top:18.0pt;
	margin-right:43.2pt;
	margin-bottom:18.0pt;
	margin-left:43.2pt;
	text-align:center;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	color:#0F4761;
	font-style:italic;}
span.MsoIntenseEmphasis
	{color:#0F4761;
	font-style:italic;}
span.MsoIntenseReference
	{font-variant:small-caps;
	color:#0F4761;
	letter-spacing:.25pt;
	font-weight:bold;}
span.Titre1Car
	{mso-style-name:"Titre 1 Car";
	mso-style-link:"Titre 1";
	font-family:"Aptos Display",sans-serif;
	color:#0F4761;}
span.Titre2Car
	{mso-style-name:"Titre 2 Car";
	mso-style-link:"Titre 2";
	font-family:"Aptos Display",sans-serif;
	color:#0F4761;}
span.Titre3Car
	{mso-style-name:"Titre 3 Car";
	mso-style-link:"Titre 3";
	font-family:"Times New Roman",serif;
	color:#0F4761;}
span.Titre4Car
	{mso-style-name:"Titre 4 Car";
	mso-style-link:"Titre 4";
	font-family:"Times New Roman",serif;
	color:#0F4761;
	font-style:italic;}
span.Titre5Car
	{mso-style-name:"Titre 5 Car";
	mso-style-link:"Titre 5";
	font-family:"Times New Roman",serif;
	color:#0F4761;}
span.Titre6Car
	{mso-style-name:"Titre 6 Car";
	mso-style-link:"Titre 6";
	font-family:"Times New Roman",serif;
	color:#595959;
	font-style:italic;}
span.Titre7Car
	{mso-style-name:"Titre 7 Car";
	mso-style-link:"Titre 7";
	font-family:"Times New Roman",serif;
	color:#595959;}
span.Titre8Car
	{mso-style-name:"Titre 8 Car";
	mso-style-link:"Titre 8";
	font-family:"Times New Roman",serif;
	color:#272727;
	font-style:italic;}
span.Titre9Car
	{mso-style-name:"Titre 9 Car";
	mso-style-link:"Titre 9";
	font-family:"Times New Roman",serif;
	color:#272727;}
span.TitreCar
	{mso-style-name:"Titre Car";
	mso-style-link:Titre;
	font-family:"Aptos Display",sans-serif;
	letter-spacing:-.5pt;}
span.Sous-titreCar
	{mso-style-name:"Sous-titre Car";
	mso-style-link:Sous-titre;
	font-family:"Times New Roman",serif;
	color:#595959;
	letter-spacing:.75pt;}
span.CitationCar
	{mso-style-name:"Citation Car";
	mso-style-link:Citation;
	color:#404040;
	font-style:italic;}
span.CitationintenseCar
	{mso-style-name:"Citation intense Car";
	mso-style-link:"Citation intense";
	color:#0F4761;
	font-style:italic;}
.MsoChpDefault
	{font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=FR style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal>&lt;!doctype html&gt;</p>

<p class=MsoNormal>&lt;html lang=&quot;fr&quot;&gt;</p>

<p class=MsoNormal>&lt;head&gt;</p>

<p class=MsoNormal>  &lt;meta charset=&quot;utf-8&quot; /&gt;</p>

<p class=MsoNormal>  &lt;meta name=&quot;viewport&quot;
content=&quot;width=device-width,initial-scale=1&quot; /&gt;</p>

<p class=MsoNormal>  &lt;title&gt;Mes Recettes&lt;/title&gt;</p>

<p class=MsoNormal>  &lt;style&gt;</p>

<p class=MsoNormal>    :root{</p>

<p class=MsoNormal>      --bg:#0b1020;</p>

<p class=MsoNormal>      --card:#0f1730;</p>

<p class=MsoNormal>      --card2:#111a33;</p>

<p class=MsoNormal>      --text:#eef1ff;</p>

<p class=MsoNormal>      --muted:#aab3de;</p>

<p class=MsoNormal>      --line:rgba(255,255,255,.09);</p>

<p class=MsoNormal>      --accent:#7c5cff;</p>

<p class=MsoNormal>      --accent2:#22c55e;</p>

<p class=MsoNormal>      --warn:#f59e0b;</p>

<p class=MsoNormal>      --danger:#ef4444;</p>

<p class=MsoNormal>      --shadow: 0 18px 50px rgba(0,0,0,.45);</p>

<p class=MsoNormal>      --radius:18px;</p>

<p class=MsoNormal>      --radius2:14px;</p>

<p class=MsoNormal>      --max:1180px;</p>

<p class=MsoNormal>      --sans: ui-sans-serif, system-ui, -apple-system, Segoe
UI, Roboto, Helvetica, Arial;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    *{box-sizing:border-box}</p>

<p class=MsoNormal>    body{</p>

<p class=MsoNormal>      margin:0;</p>

<p class=MsoNormal>      font-family:var(--sans);</p>

<p class=MsoNormal>      color:var(--text);</p>

<p class=MsoNormal>      background:</p>

<p class=MsoNormal>        radial-gradient(1100px 600px at 10% 0%,
rgba(124,92,255,.18), transparent 55%),</p>

<p class=MsoNormal>        radial-gradient(900px 520px at 90% 10%,
rgba(34,197,94,.14), transparent 55%),</p>

<p class=MsoNormal>        radial-gradient(900px 520px at 30% 100%,
rgba(245,158,11,.10), transparent 60%),</p>

<p class=MsoNormal>        var(--bg);</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .wrap{max-width:var(--max); margin:0 auto; padding:22px
16px 60px;}</p>

<p class=MsoNormal>    header{</p>

<p class=MsoNormal>      display:flex; align-items:flex-end;
justify-content:space-between; gap:12px;</p>

<p class=MsoNormal>      padding:10px 0 14px;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    h1{margin:0; font-size:28px; letter-spacing:.2px}</p>

<p class=MsoNormal>    .sub{margin-top:6px; color:var(--muted); font-size:13px;
line-height:1.35}</p>

<p class=MsoNormal>    .topActions{display:flex; gap:10px; flex-wrap:wrap;
justify-content:flex-end}</p>

<p class=MsoNormal>    .btn{</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      background:linear-gradient(180deg,
rgba(255,255,255,.09), rgba(255,255,255,.03));</p>

<p class=MsoNormal>      color:var(--text);</p>

<p class=MsoNormal>      padding:10px 12px;</p>

<p class=MsoNormal>      border-radius:12px;</p>

<p class=MsoNormal>      cursor:pointer;</p>

<p class=MsoNormal>      transition:transform .06s ease, border-color .2s ease;</p>

<p class=MsoNormal>      display:inline-flex; gap:8px; align-items:center;</p>

<p class=MsoNormal>      box-shadow: 0 8px 22px rgba(0,0,0,.22);</p>

<p class=MsoNormal>      font-weight:700; font-size:13px;</p>

<p class=MsoNormal>      user-select:none;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .btn:hover{border-color:rgba(255,255,255,.16)}</p>

<p class=MsoNormal>    .btn:active{transform:translateY(1px)}</p>

<p class=MsoNormal>    .btn.primary{</p>

<p class=MsoNormal>      border-color:rgba(124,92,255,.35);</p>

<p class=MsoNormal>      background:linear-gradient(180deg,
rgba(124,92,255,.28), rgba(124,92,255,.12));</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .btn.ghost{background:transparent; box-shadow:none}</p>

<p class=MsoNormal>    .btn.danger{</p>

<p class=MsoNormal>      border-color:rgba(239,68,68,.35);</p>

<p class=MsoNormal>      background:linear-gradient(180deg,
rgba(239,68,68,.22), rgba(239,68,68,.08));</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    .panel{</p>

<p class=MsoNormal>      background:linear-gradient(180deg,
rgba(255,255,255,.06), rgba(255,255,255,.02));</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      border-radius:var(--radius);</p>

<p class=MsoNormal>      padding:14px;</p>

<p class=MsoNormal>      box-shadow:var(--shadow);</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    label{font-size:12px; color:var(--muted); display:block;
margin:0 0 6px}</p>

<p class=MsoNormal>    input[type=&quot;text&quot;],
input[type=&quot;number&quot;], textarea, select{</p>

<p class=MsoNormal>      width:100%;</p>

<p class=MsoNormal>      padding:11px 12px;</p>

<p class=MsoNormal>      border-radius:12px;</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      background:rgba(10,16,35,.5);</p>

<p class=MsoNormal>      color:var(--text);</p>

<p class=MsoNormal>      outline:none;</p>

<p class=MsoNormal>      transition:border-color .2s ease;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    textarea{min-height:92px; resize:vertical}</p>

<p class=MsoNormal>    input:focus, textarea:focus,
select:focus{border-color:rgba(124,92,255,.55)}</p>

<p class=MsoNormal>    .controls{</p>

<p class=MsoNormal>      display:grid;</p>

<p class=MsoNormal>      grid-template-columns: 1.5fr .8fr .8fr .8fr .8fr;</p>

<p class=MsoNormal>      gap:10px;</p>

<p class=MsoNormal>      align-items:end;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    @media (max-width: 980px){</p>

<p class=MsoNormal>      .controls{grid-template-columns: 1fr 1fr; }</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    @media (max-width: 540px){</p>

<p class=MsoNormal>      .controls{grid-template-columns: 1fr; }</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    /* Pinterest-ish masonry using columns */</p>

<p class=MsoNormal>    .masonry{</p>

<p class=MsoNormal>      margin-top:14px;</p>

<p class=MsoNormal>      column-count: 3;</p>

<p class=MsoNormal>      column-gap: 12px;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    @media (max-width: 980px){ .masonry{column-count:2;} }</p>

<p class=MsoNormal>    @media (max-width: 620px){ .masonry{column-count:1;} }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    .card{</p>

<p class=MsoNormal>      break-inside: avoid;</p>

<p class=MsoNormal>      margin:0 0 12px;</p>

<p class=MsoNormal>      background:linear-gradient(180deg,
rgba(255,255,255,.06), rgba(255,255,255,.02));</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      border-radius:var(--radius2);</p>

<p class=MsoNormal>      overflow:hidden;</p>

<p class=MsoNormal>      box-shadow: 0 12px 30px rgba(0,0,0,.30);</p>

<p class=MsoNormal>      cursor:pointer;</p>

<p class=MsoNormal>      transition: transform .08s ease, border-color .2s
ease;</p>

<p class=MsoNormal>      position:relative;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .card:hover{transform:translateY(-2px);
border-color:rgba(255,255,255,.14)}</p>

<p class=MsoNormal>    .thumb{</p>

<p class=MsoNormal>      height:170px;</p>

<p class=MsoNormal>      background:linear-gradient(135deg,
rgba(124,92,255,.25), rgba(34,197,94,.14));</p>

<p class=MsoNormal>      display:flex; align-items:center;
justify-content:center;</p>

<p class=MsoNormal>      color:rgba(255,255,255,.75);</p>

<p class=MsoNormal>      font-weight:800;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .thumb img{width:100%; height:100%; object-fit:cover;
display:block}</p>

<p class=MsoNormal>    .cardBody{padding:12px 12px 13px}</p>

<p class=MsoNormal>    .name{margin:0; font-size:16px; font-weight:900;
letter-spacing:.2px}</p>

<p class=MsoNormal>    .smallRow{display:flex; gap:8px; flex-wrap:wrap;
margin-top:10px}</p>

<p class=MsoNormal>    .pill{</p>

<p class=MsoNormal>      font-size:11px;</p>

<p class=MsoNormal>      padding:5px 9px;</p>

<p class=MsoNormal>      border-radius:999px;</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      color:var(--muted);</p>

<p class=MsoNormal>      background:rgba(0,0,0,.12);</p>

<p class=MsoNormal>      white-space:nowrap;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .pill.accent{border-color:rgba(124,92,255,.35);
color:#dcd6ff; background:rgba(124,92,255,.12)}</p>

<p class=MsoNormal>    .pill.green{border-color:rgba(34,197,94,.35);
color:#c9f4da; background:rgba(34,197,94,.10)}</p>

<p class=MsoNormal>    .pill.warn{border-color:rgba(245,158,11,.35);
color:#ffe7c2; background:rgba(245,158,11,.10)}</p>

<p class=MsoNormal>    .metaLine{margin-top:8px; color:var(--muted);
font-size:12px; line-height:1.35}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    /* Modal */</p>

<p class=MsoNormal>    .overlay{</p>

<p class=MsoNormal>      position:fixed; inset:0;</p>

<p class=MsoNormal>      background:rgba(0,0,0,.55);</p>

<p class=MsoNormal>      display:none;</p>

<p class=MsoNormal>      align-items:center; justify-content:center;</p>

<p class=MsoNormal>      padding:18px;</p>

<p class=MsoNormal>      z-index:50;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .modal{</p>

<p class=MsoNormal>      width:min(980px, 100%);</p>

<p class=MsoNormal>      max-height: 88vh;</p>

<p class=MsoNormal>      overflow:auto;</p>

<p class=MsoNormal>      border-radius:22px;</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      background:linear-gradient(180deg, rgba(17,26,51,.98),
rgba(10,16,35,.98));</p>

<p class=MsoNormal>      box-shadow: 0 26px 80px rgba(0,0,0,.55);</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .modalHeader{</p>

<p class=MsoNormal>      display:flex; justify-content:space-between;
align-items:center; gap:10px;</p>

<p class=MsoNormal>      padding:14px 14px 10px;</p>

<p class=MsoNormal>      border-bottom:1px solid var(--line);</p>

<p class=MsoNormal>      position:sticky; top:0;</p>

<p class=MsoNormal>      background:linear-gradient(180deg, rgba(17,26,51,.98),
rgba(15,23,48,.98));</p>

<p class=MsoNormal>      backdrop-filter: blur(10px);</p>

<p class=MsoNormal>      z-index:2;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .modalTitle{font-weight:900; font-size:14px;
letter-spacing:.3px; color:#dfe4ff}</p>

<p class=MsoNormal>    .modalBody{padding:14px}</p>

<p class=MsoNormal>    .twoCol{</p>

<p class=MsoNormal>      display:grid;</p>

<p class=MsoNormal>      grid-template-columns: 1fr 1fr;</p>

<p class=MsoNormal>      gap:12px;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    @media (max-width: 900px){
.twoCol{grid-template-columns:1fr;} }</p>

<p class=MsoNormal>    .grid3{</p>

<p class=MsoNormal>      display:grid;</p>

<p class=MsoNormal>      grid-template-columns: repeat(3, 1fr);</p>

<p class=MsoNormal>      gap:10px;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    @media (max-width: 900px){
.grid3{grid-template-columns:1fr 1fr;} }</p>

<p class=MsoNormal>    @media (max-width: 520px){
.grid3{grid-template-columns:1fr;} }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    .sectionTitle{margin:6px 0 10px; font-size:12px;
color:var(--muted); text-transform:uppercase; letter-spacing:.18em}</p>

<p class=MsoNormal>    .divider{height:1px; background:var(--line); margin:12px
0}</p>

<p class=MsoNormal>    .imgBig{</p>

<p class=MsoNormal>      width:100%;</p>

<p class=MsoNormal>      height:260px;</p>

<p class=MsoNormal>      border-radius:16px;</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      overflow:hidden;</p>

<p class=MsoNormal>      background:rgba(0,0,0,.14);</p>

<p class=MsoNormal>      display:flex; align-items:center;
justify-content:center;</p>

<p class=MsoNormal>      color:rgba(255,255,255,.75);</p>

<p class=MsoNormal>      font-weight:800;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .imgBig img{width:100%; height:100%; object-fit:cover;
display:block}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    .ingredientsHead{display:flex; align-items:center; justify-content:space-between;
gap:10px; flex-wrap:wrap}</p>

<p class=MsoNormal>    table{width:100%; border-collapse:collapse;
overflow:hidden; border-radius:14px; border:1px solid var(--line);}</p>

<p class=MsoNormal>    th, td{padding:10px 10px; font-size:13px;
border-bottom:1px solid var(--line); vertical-align:top}</p>

<p class=MsoNormal>    th{color:var(--muted); font-weight:800; text-align:left;
background:rgba(255,255,255,.04)}</p>

<p class=MsoNormal>    tr:last-child td{border-bottom:none}</p>

<p class=MsoNormal>    .right{display:flex; gap:10px; justify-content:flex-end;
flex-wrap:wrap}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    .toast{</p>

<p class=MsoNormal>      position:fixed;</p>

<p class=MsoNormal>      left:50%;</p>

<p class=MsoNormal>      bottom:18px;</p>

<p class=MsoNormal>      transform:translateX(-50%);</p>

<p class=MsoNormal>      background:rgba(17,26,51,.96);</p>

<p class=MsoNormal>      border:1px solid var(--line);</p>

<p class=MsoNormal>      color:var(--text);</p>

<p class=MsoNormal>      padding:10px 12px;</p>

<p class=MsoNormal>      border-radius:999px;</p>

<p class=MsoNormal>      box-shadow: 0 18px 60px rgba(0,0,0,.5);</p>

<p class=MsoNormal>      display:none;</p>

<p class=MsoNormal>      z-index:80;</p>

<p class=MsoNormal>      font-size:13px;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    .mini{font-size:12px; color:var(--muted);
margin-top:6px; line-height:1.35}</p>

<p class=MsoNormal>    .checkRow{display:flex; align-items:center; gap:8px;}</p>

<p class=MsoNormal>    .checkRow input{width:auto}</p>

<p class=MsoNormal>    .chip{display:inline-flex; align-items:center; gap:8px;
padding:6px 10px; border-radius:999px; border:1px solid var(--line);
background:rgba(0,0,0,.12); color:var(--muted); font-size:12px;}</p>

<p class=MsoNormal>  &lt;/style&gt;</p>

<p class=MsoNormal>&lt;/head&gt;</p>

<p class=MsoNormal>&lt;body&gt;</p>

<p class=MsoNormal>  &lt;div class=&quot;wrap&quot;&gt;</p>

<p class=MsoNormal>    &lt;header&gt;</p>

<p class=MsoNormal>      &lt;div&gt;</p>

<p class=MsoNormal>        &lt;h1&gt;Mes Recettes&lt;/h1&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;sub&quot;&gt;Recherche
intelligente, fiches avec macros, photo, et liste de courses. Tout reste
enregistré sur ton navigateur.&lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;topActions&quot;&gt;</p>

<p class=MsoNormal>        &lt;button class=&quot;btn primary&quot;
id=&quot;btnNew&quot;&gt;<span style='font-family:"MS Mincho"'>&#65291;</span>
Nouvelle recette&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;button class=&quot;btn&quot;
id=&quot;btnGroceries&quot;&gt;<span style='font-family:"Segoe UI Emoji",sans-serif'>&#129530;</span>
Liste de courses&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;button class=&quot;btn&quot;
id=&quot;btnExport&quot;&gt;<span style='font-family:"Segoe UI Emoji",sans-serif'>&#11015;&#65039;</span>
Export&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;label class=&quot;btn ghost&quot;
style=&quot;cursor:pointer&quot;&gt;</p>

<p class=MsoNormal>          <span style='font-family:"Segoe UI Emoji",sans-serif'>&#11014;&#65039;</span>
Import</p>

<p class=MsoNormal>          &lt;input id=&quot;importFile&quot;
type=&quot;file&quot; accept=&quot;application/json&quot; hidden /&gt;</p>

<p class=MsoNormal>        &lt;/label&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/header&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    &lt;div class=&quot;panel&quot;&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;controls&quot;&gt;</p>

<p class=MsoNormal>        &lt;div&gt;</p>

<p class=MsoNormal>          &lt;label&gt;Recherche (titre, tags, ingrédients,
notes…)&lt;/label&gt;</p>

<p class=MsoNormal>          &lt;input id=&quot;q&quot; type=&quot;text&quot;
placeholder=&quot;ex: poulet curry, banana bread, high protein…&quot; /&gt;</p>

<p class=MsoNormal>          &lt;div class=&quot;mini&quot;&gt;Astuce : essaye
des mots approximatifs, ça “devine” quand même.&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div&gt;</p>

<p class=MsoNormal>          &lt;label&gt;Catégorie&lt;/label&gt;</p>

<p class=MsoNormal>          &lt;select id=&quot;cat&quot;&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;&quot;&gt;Toutes&lt;/option&gt;</p>

<p class=MsoNormal>          &lt;/select&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div&gt;</p>

<p class=MsoNormal>          &lt;label&gt;Difficulté&lt;/label&gt;</p>

<p class=MsoNormal>          &lt;select id=&quot;diff&quot;&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;&quot;&gt;Toutes&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option&gt;Facile&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option&gt;Moyen&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option&gt;Difficile&lt;/option&gt;</p>

<p class=MsoNormal>          &lt;/select&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div&gt;</p>

<p class=MsoNormal>          &lt;label&gt;Trier par&lt;/label&gt;</p>

<p class=MsoNormal>          &lt;select id=&quot;sort&quot;&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;recent&quot;&gt;Récent&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;name&quot;&gt;Nom&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;kcal&quot;&gt;Calories&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;protein&quot;&gt;Protéines&lt;/option&gt;</p>

<p class=MsoNormal>            &lt;option
value=&quot;time&quot;&gt;Temps&lt;/option&gt;</p>

<p class=MsoNormal>          &lt;/select&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;right&quot;&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnReset&quot;&gt;<span style='font-family:"Segoe UI Symbol",sans-serif'>&#8634;</span>
Reset filtres&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    &lt;div id=&quot;stats&quot;
style=&quot;margin-top:12px; display:flex; gap:10px;
flex-wrap:wrap&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    &lt;div id=&quot;grid&quot;
class=&quot;masonry&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>  &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  &lt;div class=&quot;overlay&quot;
id=&quot;overlay&quot;&gt;</p>

<p class=MsoNormal>    &lt;div class=&quot;modal&quot; role=&quot;dialog&quot;
aria-modal=&quot;true&quot;&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;modalHeader&quot;&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;modalTitle&quot;
id=&quot;modalTitle&quot;&gt;Recette&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;right&quot;&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnEdit&quot;&gt;<span style='font-family:"Segoe UI Emoji",sans-serif'>&#9999;&#65039;</span>
Modifier&lt;/button&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn danger&quot;
id=&quot;btnDelete&quot;&gt;<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128465;</span>
Supprimer&lt;/button&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnClose&quot;&gt;<span style='font-family:"Segoe UI Symbol",sans-serif'>&#10005;</span>&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;modalBody&quot;
id=&quot;modalBody&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/div&gt;</p>

<p class=MsoNormal>  &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  &lt;div class=&quot;overlay&quot;
id=&quot;overlayForm&quot;&gt;</p>

<p class=MsoNormal>    &lt;div class=&quot;modal&quot; role=&quot;dialog&quot;
aria-modal=&quot;true&quot;&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;modalHeader&quot;&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;modalTitle&quot;
id=&quot;formTitle&quot;&gt;Nouvelle recette&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;right&quot;&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn primary&quot;
id=&quot;btnSave&quot;&gt;<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128190;</span>
Enregistrer&lt;/button&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnCancelForm&quot;&gt;<span style='font-family:"Segoe UI Symbol",sans-serif'>&#10005;</span>&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;modalBody&quot;&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;twoCol&quot;&gt;</p>

<p class=MsoNormal>          &lt;div&gt;</p>

<p class=MsoNormal>            &lt;div class=&quot;imgBig&quot;
id=&quot;formImgBox&quot;&gt;</p>

<p class=MsoNormal>              &lt;span&gt;Photo du résultat&lt;/span&gt;</p>

<p class=MsoNormal>            &lt;/div&gt;</p>

<p class=MsoNormal>            &lt;div class=&quot;mini&quot;&gt;Ajoute une
photo : elle s’affichera sur la carte + la fiche recette.&lt;/div&gt;</p>

<p class=MsoNormal>            &lt;div style=&quot;margin-top:10px&quot;
class=&quot;row&quot;&gt;</p>

<p class=MsoNormal>              &lt;input type=&quot;file&quot;
id=&quot;photo&quot; accept=&quot;image/*&quot; /&gt;</p>

<p class=MsoNormal>              &lt;button class=&quot;btn&quot;
id=&quot;btnRemovePhoto&quot; type=&quot;button&quot;&gt;Retirer la
photo&lt;/button&gt;</p>

<p class=MsoNormal>            &lt;/div&gt;</p>

<p class=MsoNormal>          &lt;/div&gt;</p>

<p class=MsoNormal>          &lt;div&gt;</p>

<p class=MsoNormal>            &lt;div class=&quot;grid3&quot;&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Titre&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_name&quot;
type=&quot;text&quot; placeholder=&quot;ex: Bowl poulet curry&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Catégorie&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;select
id=&quot;f_cat&quot;&gt;&lt;/select&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Difficulté&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;select id=&quot;f_diff&quot;&gt;</p>

<p class=MsoNormal>                  &lt;option&gt;Facile&lt;/option&gt;</p>

<p class=MsoNormal>                  &lt;option&gt;Moyen&lt;/option&gt;</p>

<p class=MsoNormal>                  &lt;option&gt;Difficile&lt;/option&gt;</p>

<p class=MsoNormal>                &lt;/select&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Temps (min)&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_time&quot;
type=&quot;number&quot; min=&quot;0&quot; step=&quot;1&quot;
placeholder=&quot;ex: 25&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Portions&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_serv&quot;
type=&quot;number&quot; min=&quot;1&quot; step=&quot;1&quot;
placeholder=&quot;ex: 2&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Calories (kcal)&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_kcal&quot;
type=&quot;number&quot; min=&quot;0&quot; step=&quot;1&quot;
placeholder=&quot;ex: 520&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Protéines (g)&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_p&quot;
type=&quot;number&quot; min=&quot;0&quot; step=&quot;0.1&quot;
placeholder=&quot;ex: 45&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Glucides (g)&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_c&quot;
type=&quot;number&quot; min=&quot;0&quot; step=&quot;0.1&quot;
placeholder=&quot;ex: 55&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>              &lt;div&gt;</p>

<p class=MsoNormal>                &lt;label&gt;Lipides (g)&lt;/label&gt;</p>

<p class=MsoNormal>                &lt;input id=&quot;f_f&quot;
type=&quot;number&quot; min=&quot;0&quot; step=&quot;0.1&quot;
placeholder=&quot;ex: 14&quot; /&gt;</p>

<p class=MsoNormal>              &lt;/div&gt;</p>

<p class=MsoNormal>            &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>            &lt;div style=&quot;margin-top:12px&quot;&gt;</p>

<p class=MsoNormal>              &lt;label&gt;Tags (séparés par des
virgules)&lt;/label&gt;</p>

<p class=MsoNormal>              &lt;input id=&quot;f_tags&quot;
type=&quot;text&quot; placeholder=&quot;ex: high protein, meal prep, sans
lactose…&quot; /&gt;</p>

<p class=MsoNormal>            &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>            &lt;div style=&quot;margin-top:12px&quot;&gt;</p>

<p class=MsoNormal>              &lt;label&gt;Notes&lt;/label&gt;</p>

<p class=MsoNormal>              &lt;textarea id=&quot;f_notes&quot;
placeholder=&quot;ex: astuces, substitutions,
cuisson…&quot;&gt;&lt;/textarea&gt;</p>

<p class=MsoNormal>            &lt;/div&gt;</p>

<p class=MsoNormal>          &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>        &lt;div class=&quot;divider&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>        &lt;div class=&quot;ingredientsHead&quot;&gt;</p>

<p class=MsoNormal>          &lt;div class=&quot;sectionTitle&quot;
style=&quot;margin:0&quot;&gt;Ingrédients (structurés &#8594; liste de courses
automatique)&lt;/div&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnAddIng&quot; type=&quot;button&quot;&gt;<span style='font-family:
"MS Mincho"'>&#65291;</span> Ajouter ingrédient&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>        &lt;div style=&quot;margin-top:10px;
overflow:auto&quot;&gt;</p>

<p class=MsoNormal>          &lt;table&gt;</p>

<p class=MsoNormal>            &lt;thead&gt;</p>

<p class=MsoNormal>              &lt;tr&gt;</p>

<p class=MsoNormal>                &lt;th
style=&quot;width:28%&quot;&gt;Ingrédient&lt;/th&gt;</p>

<p class=MsoNormal>                &lt;th
style=&quot;width:12%&quot;&gt;Quantité&lt;/th&gt;</p>

<p class=MsoNormal>                &lt;th
style=&quot;width:14%&quot;&gt;Unité&lt;/th&gt;</p>

<p class=MsoNormal>                &lt;th&gt;Notes (optionnel)&lt;/th&gt;</p>

<p class=MsoNormal>                &lt;th
style=&quot;width:1%&quot;&gt;&lt;/th&gt;</p>

<p class=MsoNormal>              &lt;/tr&gt;</p>

<p class=MsoNormal>            &lt;/thead&gt;</p>

<p class=MsoNormal>            &lt;tbody
id=&quot;ingBody&quot;&gt;&lt;/tbody&gt;</p>

<p class=MsoNormal>          &lt;/table&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>        &lt;div style=&quot;margin-top:12px&quot;&gt;</p>

<p class=MsoNormal>          &lt;label&gt;Étapes / préparation&lt;/label&gt;</p>

<p class=MsoNormal>          &lt;textarea id=&quot;f_steps&quot;
placeholder=&quot;1) …&amp;#10;2) …&quot;&gt;&lt;/textarea&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/div&gt;</p>

<p class=MsoNormal>  &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  &lt;div class=&quot;overlay&quot;
id=&quot;overlayGroceries&quot;&gt;</p>

<p class=MsoNormal>    &lt;div class=&quot;modal&quot; role=&quot;dialog&quot;
aria-modal=&quot;true&quot;&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;modalHeader&quot;&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;modalTitle&quot;&gt;Liste de
courses&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;right&quot;&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnCopyGroceries&quot;&gt;<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128203;</span>
Copier&lt;/button&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnCloseGroceries&quot;&gt;<span style='font-family:"Segoe UI Symbol",sans-serif'>&#10005;</span>&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;modalBody&quot;
id=&quot;groceriesBody&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/div&gt;</p>

<p class=MsoNormal>  &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  &lt;div class=&quot;toast&quot;
id=&quot;toast&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&lt;script&gt;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  DATA + STORAGE</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>const STORAGE_KEY = &quot;my_recipes_v1&quot;;</p>

<p class=MsoNormal>const DEFAULT_CATS =
[&quot;Healthy&quot;,&quot;Gourmand&quot;,&quot;Entrée&quot;,&quot;Plat&quot;,&quot;Dessert&quot;,&quot;Bakery&quot;];</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function uid(){ return Math.random().toString(16).slice(2) +
Date.now().toString(16); }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function loadData(){</p>

<p class=MsoNormal>  try{</p>

<p class=MsoNormal>    const raw = localStorage.getItem(STORAGE_KEY);</p>

<p class=MsoNormal>    if(!raw) return { categories: DEFAULT_CATS.slice(),
recipes: seed() };</p>

<p class=MsoNormal>    const obj = JSON.parse(raw);</p>

<p class=MsoNormal>    if(!obj.categories) obj.categories =
DEFAULT_CATS.slice();</p>

<p class=MsoNormal>    if(!obj.recipes) obj.recipes = [];</p>

<p class=MsoNormal>    return obj;</p>

<p class=MsoNormal>  }catch(e){</p>

<p class=MsoNormal>    return { categories: DEFAULT_CATS.slice(), recipes:
seed() };</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function saveData(){</p>

<p class=MsoNormal>  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));</p>

<p class=MsoNormal>  render();</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function seed(){</p>

<p class=MsoNormal>  // petites recettes d’exemple (tu peux supprimer)</p>

<p class=MsoNormal>  return [</p>

<p class=MsoNormal>    {</p>

<p class=MsoNormal>      id: uid(),</p>

<p class=MsoNormal>      name: &quot;Bowl poulet curry&quot;,</p>

<p class=MsoNormal>      category: &quot;Healthy&quot;,</p>

<p class=MsoNormal>      difficulty: &quot;Facile&quot;,</p>

<p class=MsoNormal>      timeMin: 20,</p>

<p class=MsoNormal>      servings: 1,</p>

<p class=MsoNormal>      kcal: 520, p: 45, c: 55, f: 14,</p>

<p class=MsoNormal>      tags: [&quot;high protein&quot;,&quot;meal
prep&quot;],</p>

<p class=MsoNormal>      photo: null,</p>

<p class=MsoNormal>      ingredients: [</p>

<p class=MsoNormal>        {name:&quot;Blanc de poulet&quot;, qty:150,
unit:&quot;g&quot;, note:&quot;&quot;},</p>

<p class=MsoNormal>        {name:&quot;Riz basmati&quot;, qty:70,
unit:&quot;g&quot;, note:&quot;cru&quot;},</p>

<p class=MsoNormal>        {name:&quot;Lait de coco light&quot;, qty:80,
unit:&quot;ml&quot;, note:&quot;&quot;},</p>

<p class=MsoNormal>        {name:&quot;Curry&quot;, qty:1,
unit:&quot;càc&quot;, note:&quot;&quot;},</p>

<p class=MsoNormal>        {name:&quot;Épinards&quot;, qty:100,
unit:&quot;g&quot;, note:&quot;&quot;}</p>

<p class=MsoNormal>      ],</p>

<p class=MsoNormal>      steps: &quot;1) Cuire le riz.\n2) Saisir le
poulet.\n3) Ajouter curry + lait de coco, puis épinards.\n4) Servir.&quot;,</p>

<p class=MsoNormal>      notes: &quot;Option : remplacer le riz par des pommes
de terre vapeur.&quot;,</p>

<p class=MsoNormal>      createdAt: Date.now() - 1000*60*60*12,</p>

<p class=MsoNormal>      updatedAt: Date.now() - 1000*60*60*12,</p>

<p class=MsoNormal>    },</p>

<p class=MsoNormal>    {</p>

<p class=MsoNormal>      id: uid(),</p>

<p class=MsoNormal>      name: &quot;Banana bread chic&quot;,</p>

<p class=MsoNormal>      category: &quot;Bakery&quot;,</p>

<p class=MsoNormal>      difficulty: &quot;Moyen&quot;,</p>

<p class=MsoNormal>      timeMin: 65,</p>

<p class=MsoNormal>      servings: 8,</p>

<p class=MsoNormal>      kcal: 220, p: 6, c: 32, f: 8,</p>

<p class=MsoNormal>      tags: [&quot;gourmand&quot;,&quot;goûter&quot;],</p>

<p class=MsoNormal>      photo: null,</p>

<p class=MsoNormal>      ingredients: [</p>

<p class=MsoNormal>        {name:&quot;Bananes&quot;, qty:3,
unit:&quot;pièces&quot;, note:&quot;bien mûres&quot;},</p>

<p class=MsoNormal>        {name:&quot;Farine&quot;, qty:220,
unit:&quot;g&quot;, note:&quot;&quot;},</p>

<p class=MsoNormal>        {name:&quot;Oeufs&quot;, qty:2,
unit:&quot;pièces&quot;, note:&quot;&quot;},</p>

<p class=MsoNormal>        {name:&quot;Levure&quot;, qty:1,
unit:&quot;sachet&quot;, note:&quot;&quot;},</p>

<p class=MsoNormal>        {name:&quot;Pépites de chocolat&quot;, qty:90,
unit:&quot;g&quot;, note:&quot;optionnel&quot;}</p>

<p class=MsoNormal>      ],</p>

<p class=MsoNormal>      steps: &quot;1) Préchauffer à 170°C.\n2) Écraser les
bananes, ajouter œufs.\n3) Ajouter farine + levure.\n4) Ajouter pépites.\n5)
Cuire 45–55 min.&quot;,</p>

<p class=MsoNormal>      notes: &quot;Tu peux ajouter cannelle + vanille pour
le côté 'Pinterest'.&quot;,</p>

<p class=MsoNormal>      createdAt: Date.now() - 1000*60*60*36,</p>

<p class=MsoNormal>      updatedAt: Date.now() - 1000*60*60*36,</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>  ];</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>let state = loadData();</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  SMART SEARCH (fuzzy)</p>

<p class=MsoNormal> *  - approximate matching + token scoring</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>function normalize(s){</p>

<p class=MsoNormal>  return (s||&quot;&quot;)</p>

<p class=MsoNormal>    .toString()</p>

<p class=MsoNormal>    .toLowerCase()</p>

<p class=MsoNormal>   
.normalize(&quot;NFD&quot;).replace(/[\u0300-\u036f]/g,&quot;&quot;)</p>

<p class=MsoNormal>    .replace(/[^a-z0-9\s]/g,&quot; &quot;)</p>

<p class=MsoNormal>    .replace(/\s+/g,&quot; &quot;)</p>

<p class=MsoNormal>    .trim();</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function levenshtein(a,b){</p>

<p class=MsoNormal>  a = a || &quot;&quot;; b = b || &quot;&quot;;</p>

<p class=MsoNormal>  const m = a.length, n = b.length;</p>

<p class=MsoNormal>  if(m===0) return n;</p>

<p class=MsoNormal>  if(n===0) return m;</p>

<p class=MsoNormal>  const dp = new Array(n+1);</p>

<p class=MsoNormal>  for(let j=0;j&lt;=n;j++) dp[j]=j;</p>

<p class=MsoNormal>  for(let i=1;i&lt;=m;i++){</p>

<p class=MsoNormal>    let prev = dp[0];</p>

<p class=MsoNormal>    dp[0]=i;</p>

<p class=MsoNormal>    for(let j=1;j&lt;=n;j++){</p>

<p class=MsoNormal>      const tmp = dp[j];</p>

<p class=MsoNormal>      const cost = a[i-1]===b[j-1] ? 0 : 1;</p>

<p class=MsoNormal>      dp[j] = Math.min(dp[j]+1, dp[j-1]+1, prev+cost);</p>

<p class=MsoNormal>      prev = tmp;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>  return dp[n];</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function fuzzyScore(query, text){</p>

<p class=MsoNormal>  // score: higher is better</p>

<p class=MsoNormal>  const q = normalize(query);</p>

<p class=MsoNormal>  const t = normalize(text);</p>

<p class=MsoNormal>  if(!q) return 0;</p>

<p class=MsoNormal>  if(!t) return -999;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  // Exact contains boosts</p>

<p class=MsoNormal>  let score = 0;</p>

<p class=MsoNormal>  if(t.includes(q)) score += 80;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const qTokens = q.split(&quot; &quot;).filter(Boolean);</p>

<p class=MsoNormal>  const tTokens = t.split(&quot; &quot;).filter(Boolean);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  for(const qt of qTokens){</p>

<p class=MsoNormal>    if(tTokens.includes(qt)){ score += 35; continue; }</p>

<p class=MsoNormal>    // best approximate match among tokens</p>

<p class=MsoNormal>    let best = 999;</p>

<p class=MsoNormal>    for(const tt of tTokens){</p>

<p class=MsoNormal>      const d = levenshtein(qt, tt);</p>

<p class=MsoNormal>      if(d &lt; best) best = d;</p>

<p class=MsoNormal>      if(best === 0) break;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    // tolerate small typos</p>

<p class=MsoNormal>    if(best === 1) score += 18;</p>

<p class=MsoNormal>    else if(best === 2) score += 10;</p>

<p class=MsoNormal>    else if(best === 3 &amp;&amp; qt.length &gt;= 6) score
+= 6;</p>

<p class=MsoNormal>    else score -= 4;</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>  // tiny bias for shorter distance overall</p>

<p class=MsoNormal>  score += Math.max(0, 12 - Math.abs(t.length -
q.length)/8);</p>

<p class=MsoNormal>  return score;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  UI HELPERS</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>const $ = (sel)=&gt;document.querySelector(sel);</p>

<p class=MsoNormal>const grid = $(&quot;#grid&quot;);</p>

<p class=MsoNormal>const toast = $(&quot;#toast&quot;);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function showToast(msg){</p>

<p class=MsoNormal>  toast.textContent = msg;</p>

<p class=MsoNormal>  toast.style.display = &quot;block&quot;;</p>

<p class=MsoNormal>  clearTimeout(showToast._t);</p>

<p class=MsoNormal>  showToast._t =
setTimeout(()=&gt;toast.style.display=&quot;none&quot;, 1800);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function formatNum(x){</p>

<p class=MsoNormal>  if(x===null || x===undefined || x===&quot;&quot;) return
&quot;&quot;;</p>

<p class=MsoNormal>  const n = Number(x);</p>

<p class=MsoNormal>  if(Number.isNaN(n)) return &quot;&quot;;</p>

<p class=MsoNormal>  return (Math.round(n*10)/10).toString();</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function pill(text, cls=&quot;&quot;){</p>

<p class=MsoNormal>  return `&lt;span class=&quot;pill
${cls}&quot;&gt;${escapeHtml(text)}&lt;/span&gt;`;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function escapeHtml(s){</p>

<p class=MsoNormal>  return (s||&quot;&quot;).toString()</p>

<p class=MsoNormal>    .replaceAll(&quot;&amp;&quot;,&quot;&amp;amp;&quot;)</p>

<p class=MsoNormal>    .replaceAll(&quot;&lt;&quot;,&quot;&amp;lt;&quot;)</p>

<p class=MsoNormal>    .replaceAll(&quot;&gt;&quot;,&quot;&amp;gt;&quot;)</p>

<p class=MsoNormal>    .replaceAll('&quot;',&quot;&amp;quot;&quot;)</p>

<p class=MsoNormal>    .replaceAll(&quot;'&quot;,&quot;&amp;#039;&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function recipeSearchText(r){</p>

<p class=MsoNormal>  const ing = (r.ingredients||[]).map(i=&gt;`${i.name}
${i.qty||&quot;&quot;} ${i.unit||&quot;&quot;}
${i.note||&quot;&quot;}`).join(&quot; &quot;);</p>

<p class=MsoNormal>  const tags = (r.tags||[]).join(&quot; &quot;);</p>

<p class=MsoNormal>  return `${r.name} ${r.category} ${r.difficulty} ${tags}
${ing} ${r.steps||&quot;&quot;} ${r.notes||&quot;&quot;}`;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  RENDER LIST</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>function renderCategories(){</p>

<p class=MsoNormal>  const catSelect = $(&quot;#cat&quot;);</p>

<p class=MsoNormal>  const fCat = $(&quot;#f_cat&quot;);</p>

<p class=MsoNormal>  catSelect.innerHTML = `&lt;option
value=&quot;&quot;&gt;Toutes&lt;/option&gt;` +
state.categories.map(c=&gt;`&lt;option
value=&quot;${escapeHtml(c)}&quot;&gt;${escapeHtml(c)}&lt;/option&gt;`).join(&quot;&quot;);</p>

<p class=MsoNormal>  fCat.innerHTML = state.categories.map(c=&gt;`&lt;option
value=&quot;${escapeHtml(c)}&quot;&gt;${escapeHtml(c)}&lt;/option&gt;`).join(&quot;&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function statsBar(list){</p>

<p class=MsoNormal>  const total = list.length;</p>

<p class=MsoNormal>  const avgP = total ?
(list.reduce((s,r)=&gt;s+(Number(r.p)||0),0)/total) : 0;</p>

<p class=MsoNormal>  const avgK = total ?
(list.reduce((s,r)=&gt;s+(Number(r.kcal)||0),0)/total) : 0;</p>

<p class=MsoNormal>  const chips = [</p>

<p class=MsoNormal>    `&lt;span class=&quot;chip&quot;&gt;<span
style='font-family:"Segoe UI Emoji",sans-serif'>&#128218;</span> ${total}
recette${total&gt;1?&quot;s&quot;:&quot;&quot;}&lt;/span&gt;`,</p>

<p class=MsoNormal>    `&lt;span class=&quot;chip&quot;&gt;<span
style='font-family:"Segoe UI Emoji",sans-serif'>&#128293;</span> Moy.
${Math.round(avgK)} kcal&lt;/span&gt;`,</p>

<p class=MsoNormal>    `&lt;span class=&quot;chip&quot;&gt;<span
style='font-family:"Segoe UI Emoji",sans-serif'>&#128170;</span> Moy.
${Math.round(avgP)} g prot&lt;/span&gt;`</p>

<p class=MsoNormal>  ];</p>

<p class=MsoNormal>  $(&quot;#stats&quot;).innerHTML =
chips.join(&quot;&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function applyFilters(){</p>

<p class=MsoNormal>  const q = $(&quot;#q&quot;).value.trim();</p>

<p class=MsoNormal>  const cat = $(&quot;#cat&quot;).value;</p>

<p class=MsoNormal>  const diff = $(&quot;#diff&quot;).value;</p>

<p class=MsoNormal>  const sort = $(&quot;#sort&quot;).value;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  let list = state.recipes.slice();</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  if(cat) list = list.filter(r=&gt;r.category===cat);</p>

<p class=MsoNormal>  if(diff) list = list.filter(r=&gt;r.difficulty===diff);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  if(q){</p>

<p class=MsoNormal>    list = list</p>

<p class=MsoNormal>      .map(r=&gt;{</p>

<p class=MsoNormal>        const text = recipeSearchText(r);</p>

<p class=MsoNormal>        // weigh name higher</p>

<p class=MsoNormal>        const s1 = fuzzyScore(q, r.name) * 1.4;</p>

<p class=MsoNormal>        const s2 = fuzzyScore(q, text);</p>

<p class=MsoNormal>        return { r, score: s1 + s2 };</p>

<p class=MsoNormal>      })</p>

<p class=MsoNormal>      .filter(x=&gt;x.score &gt; 5)</p>

<p class=MsoNormal>      .sort((a,b)=&gt;b.score-a.score)</p>

<p class=MsoNormal>      .map(x=&gt;x.r);</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const cmpNum = (a,b)=&gt; (Number(a)||0) - (Number(b)||0);</p>

<p class=MsoNormal>  if(sort===&quot;recent&quot;){</p>

<p class=MsoNormal>    list.sort((a,b)=&gt;(b.updatedAt||0)-(a.updatedAt||0));</p>

<p class=MsoNormal>  }else if(sort===&quot;name&quot;){</p>

<p class=MsoNormal>   
list.sort((a,b)=&gt;(a.name||&quot;&quot;).localeCompare(b.name||&quot;&quot;,
&quot;fr&quot;));</p>

<p class=MsoNormal>  }else if(sort===&quot;kcal&quot;){</p>

<p class=MsoNormal>    list.sort((a,b)=&gt;cmpNum(a.kcal,b.kcal));</p>

<p class=MsoNormal>  }else if(sort===&quot;protein&quot;){</p>

<p class=MsoNormal>    list.sort((a,b)=&gt;cmpNum(b.p,a.p)); // descending</p>

<p class=MsoNormal>  }else if(sort===&quot;time&quot;){</p>

<p class=MsoNormal>    list.sort((a,b)=&gt;cmpNum(a.timeMin,b.timeMin));</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  return list;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function render(){</p>

<p class=MsoNormal>  renderCategories();</p>

<p class=MsoNormal>  const list = applyFilters();</p>

<p class=MsoNormal>  statsBar(list);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  grid.innerHTML = list.map(r=&gt;{</p>

<p class=MsoNormal>    const top = r.photo</p>

<p class=MsoNormal>      ? `&lt;div class=&quot;thumb&quot;&gt;&lt;img
alt=&quot;${escapeHtml(r.name)}&quot;
src=&quot;${r.photo}&quot;&gt;&lt;/div&gt;`</p>

<p class=MsoNormal>      : `&lt;div
class=&quot;thumb&quot;&gt;${escapeHtml(r.category||&quot;Recette&quot;)}&lt;/div&gt;`;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    const meta = [</p>

<p class=MsoNormal>      pill(r.category||&quot;—&quot;,&quot;accent&quot;),</p>

<p class=MsoNormal>      pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#9201;</span>
${r.timeMin||0} min`),</p>

<p class=MsoNormal>      pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#11088;</span>
${r.difficulty||&quot;—&quot;}`,&quot;warn&quot;),</p>

<p class=MsoNormal>      pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128293;</span>
${r.kcal||0} kcal`),</p>

<p class=MsoNormal>      pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128170;</span>
${formatNum(r.p)||0} g P`,&quot;green&quot;),</p>

<p class=MsoNormal>    ].join(&quot;&quot;);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    const tags =
(r.tags||[]).slice(0,3).map(t=&gt;pill(t)).join(&quot;&quot;);</p>

<p class=MsoNormal>    const more = (r.tags||[]).length&gt;3 ?
pill(`+${(r.tags||[]).length-3}`) : &quot;&quot;;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>    return `</p>

<p class=MsoNormal>      &lt;div class=&quot;card&quot;
data-id=&quot;${r.id}&quot;&gt;</p>

<p class=MsoNormal>        ${top}</p>

<p class=MsoNormal>        &lt;div class=&quot;cardBody&quot;&gt;</p>

<p class=MsoNormal>          &lt;h3
class=&quot;name&quot;&gt;${escapeHtml(r.name||&quot;Sans
titre&quot;)}&lt;/h3&gt;</p>

<p class=MsoNormal>          &lt;div
class=&quot;metaLine&quot;&gt;${escapeHtml((r.notes||&quot;&quot;).slice(0,90))}${(r.notes||&quot;&quot;).length&gt;90?&quot;…&quot;:&quot;&quot;}&lt;/div&gt;</p>

<p class=MsoNormal>          &lt;div class=&quot;smallRow&quot;
style=&quot;margin-top:10px&quot;&gt;${meta}&lt;/div&gt;</p>

<p class=MsoNormal>          &lt;div
class=&quot;smallRow&quot;&gt;${tags}${more}&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    `;</p>

<p class=MsoNormal>  }).join(&quot;&quot;);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  grid.querySelectorAll(&quot;.card&quot;).forEach(el=&gt;{</p>

<p class=MsoNormal>    el.addEventListener(&quot;click&quot;,
()=&gt;openRecipe(el.dataset.id));</p>

<p class=MsoNormal>  });</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  VIEW MODAL</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>let currentId = null;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function openRecipe(id){</p>

<p class=MsoNormal>  const r = state.recipes.find(x=&gt;x.id===id);</p>

<p class=MsoNormal>  if(!r) return;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  currentId = id;</p>

<p class=MsoNormal>  $(&quot;#modalTitle&quot;).textContent = r.name ||
&quot;Recette&quot;;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const img = r.photo</p>

<p class=MsoNormal>    ? `&lt;div class=&quot;imgBig&quot;&gt;&lt;img
src=&quot;${r.photo}&quot;
alt=&quot;${escapeHtml(r.name)}&quot;&gt;&lt;/div&gt;`</p>

<p class=MsoNormal>    : `&lt;div class=&quot;imgBig&quot;&gt;&lt;span&gt;Pas
de photo&lt;/span&gt;&lt;/div&gt;`;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const tags = (r.tags||[]).map(t=&gt;pill(t)).join(&quot;
&quot;);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const ingRows = (r.ingredients||[]).map(i=&gt;`</p>

<p class=MsoNormal>    &lt;tr&gt;</p>

<p class=MsoNormal>     
&lt;td&gt;&lt;strong&gt;${escapeHtml(i.name||&quot;&quot;)}&lt;/strong&gt;&lt;/td&gt;</p>

<p class=MsoNormal>      &lt;td&gt;${escapeHtml(i.qty ??
&quot;&quot;)}&lt;/td&gt;</p>

<p class=MsoNormal>     
&lt;td&gt;${escapeHtml(i.unit||&quot;&quot;)}&lt;/td&gt;</p>

<p class=MsoNormal>      &lt;td
class=&quot;muted&quot;&gt;${escapeHtml(i.note||&quot;&quot;)}&lt;/td&gt;</p>

<p class=MsoNormal>    &lt;/tr&gt;</p>

<p class=MsoNormal>  `).join(&quot;&quot;);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  $(&quot;#modalBody&quot;).innerHTML = `</p>

<p class=MsoNormal>    &lt;div class=&quot;twoCol&quot;&gt;</p>

<p class=MsoNormal>      &lt;div&gt;</p>

<p class=MsoNormal>        ${img}</p>

<p class=MsoNormal>        &lt;div style=&quot;margin-top:10px&quot;
class=&quot;smallRow&quot;&gt;</p>

<p class=MsoNormal>         
${pill(r.category||&quot;—&quot;,&quot;accent&quot;)}</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#11088;</span>
${r.difficulty||&quot;—&quot;}`,&quot;warn&quot;)}</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#9201;</span>
${r.timeMin||0} min`)}</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#127869;</span>
${r.servings||1} portion(s)`)}</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div style=&quot;margin-top:10px&quot;
class=&quot;smallRow&quot;&gt;</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128293;</span>
${r.kcal||0} kcal`)}</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#128170;</span>
${formatNum(r.p)||0} g prot`,&quot;green&quot;)}</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#127834;</span>
${formatNum(r.c)||0} g gluc`)}</p>

<p class=MsoNormal>          ${pill(`<span style='font-family:"Segoe UI Emoji",sans-serif'>&#129361;</span>
${formatNum(r.f)||0} g lip`)}</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div style=&quot;margin-top:10px&quot;
class=&quot;smallRow&quot;&gt;${tags}&lt;/div&gt;</p>

<p class=MsoNormal>        ${r.notes ? `&lt;div class=&quot;divider&quot;&gt;&lt;/div&gt;&lt;div
class=&quot;sectionTitle&quot;&gt;Notes&lt;/div&gt;&lt;div&gt;${escapeHtml(r.notes).replaceAll(&quot;\n&quot;,&quot;&lt;br&gt;&quot;)}&lt;/div&gt;`
: &quot;&quot;}</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>      &lt;div&gt;</p>

<p class=MsoNormal>        &lt;div class=&quot;ingredientsHead&quot;&gt;</p>

<p class=MsoNormal>          &lt;div class=&quot;sectionTitle&quot;
style=&quot;margin:0&quot;&gt;Ingrédients&lt;/div&gt;</p>

<p class=MsoNormal>          &lt;button class=&quot;btn&quot;
id=&quot;btnAddToGroceries&quot; type=&quot;button&quot;&gt;<span
style='font-family:"Segoe UI Emoji",sans-serif'>&#129530;</span> Ajouter à la
liste&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div style=&quot;margin-top:10px;
overflow:auto&quot;&gt;</p>

<p class=MsoNormal>          &lt;table&gt;</p>

<p class=MsoNormal>           
&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Ingrédient&lt;/th&gt;&lt;th&gt;Qté&lt;/th&gt;&lt;th&gt;Unité&lt;/th&gt;&lt;th&gt;Note&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;</p>

<p class=MsoNormal>            &lt;tbody&gt;${ingRows || `&lt;tr&gt;&lt;td
colspan=&quot;4&quot; class=&quot;muted&quot;&gt;Aucun
ingrédient&lt;/td&gt;&lt;/tr&gt;`}&lt;/tbody&gt;</p>

<p class=MsoNormal>          &lt;/table&gt;</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>        &lt;div class=&quot;divider&quot;&gt;&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div
class=&quot;sectionTitle&quot;&gt;Préparation&lt;/div&gt;</p>

<p class=MsoNormal>        &lt;div style=&quot;line-height:1.55;
color:rgba(255,255,255,.9)&quot;&gt;${escapeHtml(r.steps||&quot;&quot;).replaceAll(&quot;\n&quot;,&quot;&lt;br&gt;&quot;)
|| `&lt;span class=&quot;muted&quot;&gt;Aucune étape&lt;/span&gt;`}&lt;/div&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/div&gt;</p>

<p class=MsoNormal>  `;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  $(&quot;#overlay&quot;).style.display = &quot;flex&quot;;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const btn = $(&quot;#btnAddToGroceries&quot;);</p>

<p class=MsoNormal>  if(btn){</p>

<p class=MsoNormal>    btn.addEventListener(&quot;click&quot;, ()=&gt;{</p>

<p class=MsoNormal>      addRecipeToGroceries(r);</p>

<p class=MsoNormal>      showToast(&quot;Ajouté à la liste de courses&quot;);</p>

<p class=MsoNormal>    });</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function closeRecipe(){</p>

<p class=MsoNormal>  $(&quot;#overlay&quot;).style.display = &quot;none&quot;;</p>

<p class=MsoNormal>  currentId = null;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  FORM (ADD/EDIT)</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>let editId = null;</p>

<p class=MsoNormal>let formPhoto = null;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function resetForm(){</p>

<p class=MsoNormal>  editId = null;</p>

<p class=MsoNormal>  formPhoto = null;</p>

<p class=MsoNormal>  $(&quot;#photo&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_name&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_cat&quot;).value = state.categories[0] ||
&quot;Healthy&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_diff&quot;).value = &quot;Facile&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_time&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_serv&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_kcal&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_p&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_c&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_f&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_tags&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_notes&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_steps&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#ingBody&quot;).innerHTML = &quot;&quot;;</p>

<p class=MsoNormal>  addIngRow(); addIngRow(); // 2 lignes par défaut</p>

<p class=MsoNormal>  renderFormPhoto();</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function renderFormPhoto(){</p>

<p class=MsoNormal>  const box = $(&quot;#formImgBox&quot;);</p>

<p class=MsoNormal>  box.innerHTML = formPhoto ? `&lt;img
src=&quot;${formPhoto}&quot; alt=&quot;Photo&quot;&gt;` : `&lt;span&gt;Photo du
résultat&lt;/span&gt;`;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function addIngRow(ing={name:&quot;&quot;, qty:&quot;&quot;,
unit:&quot;&quot;, note:&quot;&quot;}){</p>

<p class=MsoNormal>  const tr = document.createElement(&quot;tr&quot;);</p>

<p class=MsoNormal>  tr.innerHTML = `</p>

<p class=MsoNormal>    &lt;td&gt;&lt;input type=&quot;text&quot;
placeholder=&quot;ex: farine&quot;
value=&quot;${escapeHtml(ing.name)}&quot;&gt;&lt;/td&gt;</p>

<p class=MsoNormal>    &lt;td&gt;&lt;input type=&quot;number&quot;
step=&quot;0.1&quot; placeholder=&quot;ex: 200&quot;
value=&quot;${escapeHtml(ing.qty)}&quot;&gt;&lt;/td&gt;</p>

<p class=MsoNormal>    &lt;td&gt;</p>

<p class=MsoNormal>      &lt;select&gt;</p>

<p class=MsoNormal>       
${[&quot;g&quot;,&quot;kg&quot;,&quot;ml&quot;,&quot;l&quot;,&quot;pièces&quot;,&quot;càc&quot;,&quot;càs&quot;,&quot;pincée&quot;,&quot;sachet&quot;,&quot;tranche&quot;,&quot;au
goût&quot;].map(u=&gt;`&lt;option ${ing.unit===u?&quot;selected&quot;:&quot;&quot;}&gt;${u}&lt;/option&gt;`).join(&quot;&quot;)}</p>

<p class=MsoNormal>      &lt;/select&gt;</p>

<p class=MsoNormal>    &lt;/td&gt;</p>

<p class=MsoNormal>    &lt;td&gt;&lt;input type=&quot;text&quot;
placeholder=&quot;optionnel&quot;
value=&quot;${escapeHtml(ing.note)}&quot;&gt;&lt;/td&gt;</p>

<p class=MsoNormal>    &lt;td&gt;&lt;button class=&quot;btn danger&quot;
type=&quot;button&quot;
title=&quot;Supprimer&quot;&gt;—&lt;/button&gt;&lt;/td&gt;</p>

<p class=MsoNormal>  `;</p>

<p class=MsoNormal> 
tr.querySelector(&quot;button&quot;).addEventListener(&quot;click&quot;,
()=&gt;{</p>

<p class=MsoNormal>    tr.remove();</p>

<p class=MsoNormal>  });</p>

<p class=MsoNormal>  $(&quot;#ingBody&quot;).appendChild(tr);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function openFormNew(){</p>

<p class=MsoNormal>  $(&quot;#formTitle&quot;).textContent = &quot;Nouvelle
recette&quot;;</p>

<p class=MsoNormal>  resetForm();</p>

<p class=MsoNormal>  $(&quot;#overlayForm&quot;).style.display =
&quot;flex&quot;;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function openFormEdit(id){</p>

<p class=MsoNormal>  const r = state.recipes.find(x=&gt;x.id===id);</p>

<p class=MsoNormal>  if(!r) return;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  if(!confirm(&quot;Tu veux modifier cette recette ?&quot;))
return;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  editId = id;</p>

<p class=MsoNormal>  formPhoto = r.photo || null;</p>

<p class=MsoNormal>  $(&quot;#formTitle&quot;).textContent = &quot;Modifier la
recette&quot;;</p>

<p class=MsoNormal>  $(&quot;#photo&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_name&quot;).value = r.name || &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_cat&quot;).value = r.category ||
(state.categories[0]||&quot;Healthy&quot;);</p>

<p class=MsoNormal>  $(&quot;#f_diff&quot;).value = r.difficulty ||
&quot;Facile&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_time&quot;).value = r.timeMin ?? &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_serv&quot;).value = r.servings ?? &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_kcal&quot;).value = r.kcal ?? &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_p&quot;).value = r.p ?? &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_c&quot;).value = r.c ?? &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_f&quot;).value = r.f ?? &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_tags&quot;).value = (r.tags||[]).join(&quot;,
&quot;);</p>

<p class=MsoNormal>  $(&quot;#f_notes&quot;).value = r.notes || &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#f_steps&quot;).value = r.steps || &quot;&quot;;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  $(&quot;#ingBody&quot;).innerHTML = &quot;&quot;;</p>

<p class=MsoNormal>  (r.ingredients||[]).forEach(i=&gt;addIngRow(i));</p>

<p class=MsoNormal>  if((r.ingredients||[]).length===0) addIngRow();</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  renderFormPhoto();</p>

<p class=MsoNormal>  $(&quot;#overlayForm&quot;).style.display =
&quot;flex&quot;;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function closeForm(){</p>

<p class=MsoNormal>  $(&quot;#overlayForm&quot;).style.display =
&quot;none&quot;;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function collectIngredients(){</p>

<p class=MsoNormal>  const rows =
[...$(&quot;#ingBody&quot;).querySelectorAll(&quot;tr&quot;)];</p>

<p class=MsoNormal>  return rows.map(tr=&gt;{</p>

<p class=MsoNormal>    const inputs = tr.querySelectorAll(&quot;input&quot;);</p>

<p class=MsoNormal>    const name = inputs[0].value.trim();</p>

<p class=MsoNormal>    const qtyRaw = inputs[1].value;</p>

<p class=MsoNormal>    const unit = tr.querySelector(&quot;select&quot;).value;</p>

<p class=MsoNormal>    const note = inputs[2].value.trim();</p>

<p class=MsoNormal>    const qty = qtyRaw===&quot;&quot; ? &quot;&quot; :
Number(qtyRaw);</p>

<p class=MsoNormal>    return { name, qty, unit, note };</p>

<p class=MsoNormal>  }).filter(i=&gt;i.name);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function saveRecipe(){</p>

<p class=MsoNormal>  const name = $(&quot;#f_name&quot;).value.trim();</p>

<p class=MsoNormal>  if(!name){</p>

<p class=MsoNormal>    alert(&quot;Il manque le titre de la recette.&quot;);</p>

<p class=MsoNormal>    return;</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const obj = {</p>

<p class=MsoNormal>    id: editId || uid(),</p>

<p class=MsoNormal>    name,</p>

<p class=MsoNormal>    category: $(&quot;#f_cat&quot;).value,</p>

<p class=MsoNormal>    difficulty: $(&quot;#f_diff&quot;).value,</p>

<p class=MsoNormal>    timeMin: Number($(&quot;#f_time&quot;).value || 0),</p>

<p class=MsoNormal>    servings: Number($(&quot;#f_serv&quot;).value || 1),</p>

<p class=MsoNormal>    kcal: Number($(&quot;#f_kcal&quot;).value || 0),</p>

<p class=MsoNormal>    p: Number($(&quot;#f_p&quot;).value || 0),</p>

<p class=MsoNormal>    c: Number($(&quot;#f_c&quot;).value || 0),</p>

<p class=MsoNormal>    f: Number($(&quot;#f_f&quot;).value || 0),</p>

<p class=MsoNormal>    tags:
$(&quot;#f_tags&quot;).value.split(&quot;,&quot;).map(s=&gt;s.trim()).filter(Boolean),</p>

<p class=MsoNormal>    photo: formPhoto,</p>

<p class=MsoNormal>    ingredients: collectIngredients(),</p>

<p class=MsoNormal>    steps: $(&quot;#f_steps&quot;).value.trim(),</p>

<p class=MsoNormal>    notes: $(&quot;#f_notes&quot;).value.trim(),</p>

<p class=MsoNormal>    updatedAt: Date.now(),</p>

<p class=MsoNormal>    createdAt: Date.now()</p>

<p class=MsoNormal>  };</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  if(editId){</p>

<p class=MsoNormal>    const idx =
state.recipes.findIndex(r=&gt;r.id===editId);</p>

<p class=MsoNormal>    if(idx&gt;=0){</p>

<p class=MsoNormal>      obj.createdAt = state.recipes[idx].createdAt ||
obj.createdAt;</p>

<p class=MsoNormal>      state.recipes[idx] = obj;</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>    showToast(&quot;Recette modifiée&quot;);</p>

<p class=MsoNormal>  }else{</p>

<p class=MsoNormal>    state.recipes.unshift(obj);</p>

<p class=MsoNormal>    showToast(&quot;Recette ajoutée&quot;);</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  saveData();</p>

<p class=MsoNormal>  closeForm();</p>

<p class=MsoNormal>  openRecipe(obj.id);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  DELETE</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>function deleteCurrent(){</p>

<p class=MsoNormal>  if(!currentId) return;</p>

<p class=MsoNormal>  const r = state.recipes.find(x=&gt;x.id===currentId);</p>

<p class=MsoNormal>  if(!r) return;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  const ok = confirm(`Supprimer définitivement :
&quot;${r.name}&quot; ?`);</p>

<p class=MsoNormal>  if(!ok) return;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  state.recipes =
state.recipes.filter(x=&gt;x.id!==currentId);</p>

<p class=MsoNormal>  saveData();</p>

<p class=MsoNormal>  closeRecipe();</p>

<p class=MsoNormal>  showToast(&quot;Recette supprimée&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  GROCERIES LIST</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>let groceries = []; // {name, qty, unit, note, checked}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>function loadGroceries(){</p>

<p class=MsoNormal>  try{</p>

<p class=MsoNormal>    const raw = localStorage.getItem(&quot;my_groceries_v1&quot;);</p>

<p class=MsoNormal>    groceries = raw ? JSON.parse(raw) : [];</p>

<p class=MsoNormal>    if(!Array.isArray(groceries)) groceries = [];</p>

<p class=MsoNormal>  }catch(e){ groceries = []; }</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function saveGroceries(){</p>

<p class=MsoNormal>  localStorage.setItem(&quot;my_groceries_v1&quot;,
JSON.stringify(groceries));</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function keyForIng(name, unit){</p>

<p class=MsoNormal>  return normalize(name) + &quot;||&quot; +
normalize(unit||&quot;&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function addRecipeToGroceries(r){</p>

<p class=MsoNormal>  loadGroceries();</p>

<p class=MsoNormal>  const items = (r.ingredients||[]).filter(i=&gt;i.name);</p>

<p class=MsoNormal>  const map = new
Map(groceries.map(g=&gt;[keyForIng(g.name,g.unit), g]));</p>

<p class=MsoNormal>  for(const it of items){</p>

<p class=MsoNormal>    const k = keyForIng(it.name, it.unit);</p>

<p class=MsoNormal>    if(map.has(k)){</p>

<p class=MsoNormal>      const g = map.get(k);</p>

<p class=MsoNormal>      // sum quantities only if both numeric</p>

<p class=MsoNormal>      if(typeof g.qty === &quot;number&quot; &amp;&amp;
typeof it.qty === &quot;number&quot;){</p>

<p class=MsoNormal>        g.qty = Math.round((g.qty + it.qty) * 10) / 10;</p>

<p class=MsoNormal>      }else if(!g.qty &amp;&amp; it.qty){</p>

<p class=MsoNormal>        g.qty = it.qty;</p>

<p class=MsoNormal>      }</p>

<p class=MsoNormal>      if(it.note &amp;&amp; !g.note) g.note = it.note;</p>

<p class=MsoNormal>    }else{</p>

<p class=MsoNormal>      const g = { name: it.name, qty: it.qty, unit: it.unit,
note: it.note||&quot;&quot;, checked:false };</p>

<p class=MsoNormal>      groceries.push(g);</p>

<p class=MsoNormal>      map.set(k,g);</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>  saveGroceries();</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function openGroceries(){</p>

<p class=MsoNormal>  loadGroceries();</p>

<p class=MsoNormal>  renderGroceries();</p>

<p class=MsoNormal>  $(&quot;#overlayGroceries&quot;).style.display =
&quot;flex&quot;;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function closeGroceries(){</p>

<p class=MsoNormal>  $(&quot;#overlayGroceries&quot;).style.display =
&quot;none&quot;;</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function renderGroceries(){</p>

<p class=MsoNormal>  if(groceries.length===0){</p>

<p class=MsoNormal>    $(&quot;#groceriesBody&quot;).innerHTML = `&lt;div
class=&quot;muted&quot;&gt;Ta liste est vide. Ouvre une recette &#8594;
“Ajouter à la liste”.&lt;/div&gt;`;</p>

<p class=MsoNormal>    return;</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>  // group by unit (nice)</p>

<p class=MsoNormal>  const groups = {};</p>

<p class=MsoNormal>  for(const g of groceries){</p>

<p class=MsoNormal>    const u = g.unit || &quot;—&quot;;</p>

<p class=MsoNormal>    (groups[u] ||= []).push(g);</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>  const html = Object.entries(groups).map(([unit,
items])=&gt;{</p>

<p class=MsoNormal>    const rows = items.map((g,idx)=&gt;`</p>

<p class=MsoNormal>      &lt;div class=&quot;checkRow&quot;
style=&quot;padding:10px 0; border-bottom:1px solid var(--line)&quot;&gt;</p>

<p class=MsoNormal>        &lt;input type=&quot;checkbox&quot;
${g.checked?&quot;checked&quot;:&quot;&quot;}
data-k=&quot;${escapeHtml(keyForIng(g.name,g.unit))}&quot;&gt;</p>

<p class=MsoNormal>        &lt;div style=&quot;flex:1&quot;&gt;</p>

<p class=MsoNormal>         
&lt;div&gt;&lt;strong&gt;${escapeHtml(g.name)}&lt;/strong&gt; &lt;span
class=&quot;muted&quot;&gt;${g.qty!==&quot;&quot; ? escapeHtml(g.qty) :
&quot;&quot;} ${escapeHtml(g.unit||&quot;&quot;)}&lt;/span&gt;&lt;/div&gt;</p>

<p class=MsoNormal>          ${g.note ? `&lt;div
class=&quot;mini&quot;&gt;${escapeHtml(g.note)}&lt;/div&gt;` : &quot;&quot;}</p>

<p class=MsoNormal>        &lt;/div&gt;</p>

<p class=MsoNormal>        &lt;button class=&quot;btn danger&quot;
data-del=&quot;${escapeHtml(keyForIng(g.name,g.unit))}&quot;
type=&quot;button&quot;&gt;Suppr&lt;/button&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    `).join(&quot;&quot;);</p>

<p class=MsoNormal>    return `&lt;div
class=&quot;sectionTitle&quot;&gt;${escapeHtml(unit)}&lt;/div&gt;${rows}`;</p>

<p class=MsoNormal>  }).join(&quot;&lt;div
class='divider'&gt;&lt;/div&gt;&quot;);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>  $(&quot;#groceriesBody&quot;).innerHTML = `</p>

<p class=MsoNormal>    &lt;div class=&quot;row&quot;
style=&quot;justify-content:space-between; margin-bottom:8px&quot;&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;chip&quot;&gt;<span
style='font-family:"Segoe UI Emoji",sans-serif'>&#129534;</span>
${groceries.length} items&lt;/div&gt;</p>

<p class=MsoNormal>      &lt;div class=&quot;row&quot;&gt;</p>

<p class=MsoNormal>        &lt;button class=&quot;btn&quot;
id=&quot;btnClearChecked&quot; type=&quot;button&quot;&gt;Nettoyer
cochés&lt;/button&gt;</p>

<p class=MsoNormal>        &lt;button class=&quot;btn danger&quot;
id=&quot;btnClearAll&quot; type=&quot;button&quot;&gt;Tout vider&lt;/button&gt;</p>

<p class=MsoNormal>      &lt;/div&gt;</p>

<p class=MsoNormal>    &lt;/div&gt;</p>

<p class=MsoNormal>    ${html}</p>

<p class=MsoNormal>  `;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal> 
$(&quot;#groceriesBody&quot;).querySelectorAll(&quot;input[type=checkbox]&quot;).forEach(cb=&gt;{</p>

<p class=MsoNormal>    cb.addEventListener(&quot;change&quot;, ()=&gt;{</p>

<p class=MsoNormal>      const k = cb.dataset.k;</p>

<p class=MsoNormal>      const g =
groceries.find(x=&gt;keyForIng(x.name,x.unit)===k);</p>

<p class=MsoNormal>      if(g){ g.checked = cb.checked; saveGroceries(); }</p>

<p class=MsoNormal>    });</p>

<p class=MsoNormal>  });</p>

<p class=MsoNormal> 
$(&quot;#groceriesBody&quot;).querySelectorAll(&quot;button[data-del]&quot;).forEach(btn=&gt;{</p>

<p class=MsoNormal>    btn.addEventListener(&quot;click&quot;, ()=&gt;{</p>

<p class=MsoNormal>      const k = btn.dataset.del;</p>

<p class=MsoNormal>      groceries =
groceries.filter(x=&gt;keyForIng(x.name,x.unit)!==k);</p>

<p class=MsoNormal>      saveGroceries();</p>

<p class=MsoNormal>      renderGroceries();</p>

<p class=MsoNormal>    });</p>

<p class=MsoNormal>  });</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal> 
$(&quot;#btnClearChecked&quot;).addEventListener(&quot;click&quot;, ()=&gt;{</p>

<p class=MsoNormal>    groceries = groceries.filter(g=&gt;!g.checked);</p>

<p class=MsoNormal>    saveGroceries(); renderGroceries();</p>

<p class=MsoNormal>  });</p>

<p class=MsoNormal> 
$(&quot;#btnClearAll&quot;).addEventListener(&quot;click&quot;, ()=&gt;{</p>

<p class=MsoNormal>    if(confirm(&quot;Vider toute la liste de courses
?&quot;)){</p>

<p class=MsoNormal>      groceries = [];</p>

<p class=MsoNormal>      saveGroceries(); renderGroceries();</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>  });</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function copyGroceries(){</p>

<p class=MsoNormal>  loadGroceries();</p>

<p class=MsoNormal>  const lines = groceries.map(g=&gt;{</p>

<p class=MsoNormal>    const qty = (g.qty!==&quot;&quot; &amp;&amp;
g.qty!==null &amp;&amp; g.qty!==undefined) ? `${g.qty} ` : &quot;&quot;;</p>

<p class=MsoNormal>    const unit = g.unit ? `${g.unit} ` : &quot;&quot;;</p>

<p class=MsoNormal>    const note = g.note ? ` (${g.note})` : &quot;&quot;;</p>

<p class=MsoNormal>    return `- ${g.name}: ${qty}${unit}`.trim() + note;</p>

<p class=MsoNormal>  }).join(&quot;\n&quot;);</p>

<p class=MsoNormal> 
navigator.clipboard.writeText(lines).then(()=&gt;showToast(&quot;Liste copiée <span
style='font-family:"Segoe UI Emoji",sans-serif'>&#9989;</span>&quot;)).catch(()=&gt;alert(&quot;Copie
impossible sur ce navigateur.&quot;));</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  EXPORT / IMPORT</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>function exportJSON(){</p>

<p class=MsoNormal>  const payload = { ...state, exportedAt: new
Date().toISOString() };</p>

<p class=MsoNormal>  const blob = new Blob([JSON.stringify(payload,null,2)],
{type:&quot;application/json&quot;});</p>

<p class=MsoNormal>  const a = document.createElement(&quot;a&quot;);</p>

<p class=MsoNormal>  a.href = URL.createObjectURL(blob);</p>

<p class=MsoNormal>  a.download = &quot;mes-recettes.json&quot;;</p>

<p class=MsoNormal>  a.click();</p>

<p class=MsoNormal>  URL.revokeObjectURL(a.href);</p>

<p class=MsoNormal>  showToast(&quot;Export téléchargé&quot;);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>function importJSON(file){</p>

<p class=MsoNormal>  const reader = new FileReader();</p>

<p class=MsoNormal>  reader.onload = ()=&gt;{</p>

<p class=MsoNormal>    try{</p>

<p class=MsoNormal>      const obj = JSON.parse(reader.result);</p>

<p class=MsoNormal>      if(!obj || !Array.isArray(obj.recipes)) throw new
Error(&quot;Format invalide&quot;);</p>

<p class=MsoNormal>      // merge categories</p>

<p class=MsoNormal>      const cats = Array.isArray(obj.categories) ?
obj.categories : DEFAULT_CATS.slice();</p>

<p class=MsoNormal>      const mergedCats = Array.from(new
Set([...(state.categories||[]), ...cats]));</p>

<p class=MsoNormal>      // merge recipes by id</p>

<p class=MsoNormal>      const byId = new
Map(state.recipes.map(r=&gt;[r.id,r]));</p>

<p class=MsoNormal>      for(const r of obj.recipes){</p>

<p class=MsoNormal>        if(!r.id) r.id = uid();</p>

<p class=MsoNormal>        byId.set(r.id, r);</p>

<p class=MsoNormal>      }</p>

<p class=MsoNormal>      state.categories = mergedCats;</p>

<p class=MsoNormal>      state.recipes = Array.from(byId.values());</p>

<p class=MsoNormal>      saveData();</p>

<p class=MsoNormal>      showToast(&quot;Import OK&quot;);</p>

<p class=MsoNormal>    }catch(e){</p>

<p class=MsoNormal>      alert(&quot;Import impossible : fichier
invalide.&quot;);</p>

<p class=MsoNormal>    }</p>

<p class=MsoNormal>  };</p>

<p class=MsoNormal>  reader.readAsText(file);</p>

<p class=MsoNormal>}</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  PHOTO</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>$(&quot;#photo&quot;).addEventListener(&quot;change&quot;,
(e)=&gt;{</p>

<p class=MsoNormal>  const file = e.target.files?.[0];</p>

<p class=MsoNormal>  if(!file) return;</p>

<p class=MsoNormal>  const maxMB = 2.5;</p>

<p class=MsoNormal>  if(file.size &gt; maxMB*1024*1024){</p>

<p class=MsoNormal>    alert(&quot;Photo trop lourde. Essaie une photo plus
légère (&#8776;2–2.5 MB max).&quot;);</p>

<p class=MsoNormal>    e.target.value = &quot;&quot;;</p>

<p class=MsoNormal>    return;</p>

<p class=MsoNormal>  }</p>

<p class=MsoNormal>  const reader = new FileReader();</p>

<p class=MsoNormal>  reader.onload = ()=&gt;{</p>

<p class=MsoNormal>    formPhoto = reader.result;</p>

<p class=MsoNormal>    renderFormPhoto();</p>

<p class=MsoNormal>  };</p>

<p class=MsoNormal>  reader.readAsDataURL(file);</p>

<p class=MsoNormal>});</p>

<p class=MsoNormal>$(&quot;#btnRemovePhoto&quot;).addEventListener(&quot;click&quot;,
()=&gt;{</p>

<p class=MsoNormal>  formPhoto = null;</p>

<p class=MsoNormal>  $(&quot;#photo&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  renderFormPhoto();</p>

<p class=MsoNormal>});</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  EVENTS</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>$(&quot;#btnNew&quot;).addEventListener(&quot;click&quot;,
openFormNew);</p>

<p class=MsoNormal>$(&quot;#btnClose&quot;).addEventListener(&quot;click&quot;,
closeRecipe);</p>

<p class=MsoNormal>$(&quot;#overlay&quot;).addEventListener(&quot;click&quot;,
(e)=&gt;{ if(e.target.id===&quot;overlay&quot;) closeRecipe(); });</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>$(&quot;#btnEdit&quot;).addEventListener(&quot;click&quot;,
()=&gt;{</p>

<p class=MsoNormal>  if(!currentId) return;</p>

<p class=MsoNormal>  closeRecipe();</p>

<p class=MsoNormal>  openFormEdit(currentId);</p>

<p class=MsoNormal>});</p>

<p class=MsoNormal>$(&quot;#btnDelete&quot;).addEventListener(&quot;click&quot;,
deleteCurrent);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>$(&quot;#btnCancelForm&quot;).addEventListener(&quot;click&quot;,
()=&gt;$(&quot;#overlayForm&quot;).style.display=&quot;none&quot;);</p>

<p class=MsoNormal>$(&quot;#overlayForm&quot;).addEventListener(&quot;click&quot;,
(e)=&gt;{ if(e.target.id===&quot;overlayForm&quot;) closeForm(); });</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>$(&quot;#btnSave&quot;).addEventListener(&quot;click&quot;,
saveRecipe);</p>

<p class=MsoNormal>$(&quot;#btnAddIng&quot;).addEventListener(&quot;click&quot;,
()=&gt;addIngRow());</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>$(&quot;#btnGroceries&quot;).addEventListener(&quot;click&quot;,
openGroceries);</p>

<p class=MsoNormal>$(&quot;#btnCloseGroceries&quot;).addEventListener(&quot;click&quot;,
closeGroceries);</p>

<p class=MsoNormal>$(&quot;#overlayGroceries&quot;).addEventListener(&quot;click&quot;,
(e)=&gt;{ if(e.target.id===&quot;overlayGroceries&quot;) closeGroceries(); });</p>

<p class=MsoNormal>$(&quot;#btnCopyGroceries&quot;).addEventListener(&quot;click&quot;,
copyGroceries);</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>$(&quot;#btnExport&quot;).addEventListener(&quot;click&quot;,
exportJSON);</p>

<p class=MsoNormal>$(&quot;#importFile&quot;).addEventListener(&quot;change&quot;,
(e)=&gt;{</p>

<p class=MsoNormal>  const f = e.target.files?.[0];</p>

<p class=MsoNormal>  if(f) importJSON(f);</p>

<p class=MsoNormal>  e.target.value = &quot;&quot;;</p>

<p class=MsoNormal>});</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>$(&quot;#btnReset&quot;).addEventListener(&quot;click&quot;,
()=&gt;{</p>

<p class=MsoNormal>  $(&quot;#q&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#cat&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#diff&quot;).value = &quot;&quot;;</p>

<p class=MsoNormal>  $(&quot;#sort&quot;).value = &quot;recent&quot;;</p>

<p class=MsoNormal>  render();</p>

<p class=MsoNormal>});</p>

<p class=MsoNormal>[&quot;q&quot;,&quot;cat&quot;,&quot;diff&quot;,&quot;sort&quot;].forEach(id=&gt;{</p>

<p class=MsoNormal>  $(&quot;#&quot;+id).addEventListener(&quot;input&quot;,
render);</p>

<p class=MsoNormal>  $(&quot;#&quot;+id).addEventListener(&quot;change&quot;,
render);</p>

<p class=MsoNormal>});</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>/** =======================</p>

<p class=MsoNormal> *  INIT</p>

<p class=MsoNormal> *  ======================= */</p>

<p class=MsoNormal>renderCategories();</p>

<p class=MsoNormal>render();</p>

<p class=MsoNormal>resetForm();</p>

<p class=MsoNormal>&lt;/script&gt;</p>

<p class=MsoNormal>&lt;/body&gt;</p>

<p class=MsoNormal>&lt;/html&gt;</p>

</div>

</body>

</html>
