<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Recettes Premium V2</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f8f6f2;margin:0;padding:20px;color:#222}
h1{text-align:center}
.section{background:white;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 5px 20px rgba(0,0,0,0.05)}
button{padding:8px 12px;border:none;border-radius:8px;background:#7c5cff;color:white;cursor:pointer;margin-top:10px}
textarea,input{width:100%;padding:8px;margin-top:5px;margin-bottom:10px;border-radius:8px;border:1px solid #ddd}
.card{border:1px solid #eee;border-radius:12px;padding:15px;margin-bottom:15px}
pre{white-space:pre-wrap}
</style>
</head>
<body>

<h1>üìñ Mes Recettes Premium</h1>

<div class="section">
<h2>Importer recette (format texte/Word)</h2>
<p>Colle ici ton texte au format :</p>
<pre>
Nom: ...
Ingr√©dients:
...
Instructions:
...
</pre>
<textarea id="importText" rows="10" placeholder="Colle ici ta recette..."></textarea>
<button onclick="importRecipe()">Importer</button>
</div>

<div class="section">
<h2>Ajouter recette manuellement</h2>
<input id="title" placeholder="Nom de la recette"/>
<textarea id="ingredients" placeholder="Ingr√©dients (ligne par ligne)"></textarea>
<textarea id="instructions" placeholder="Instructions"></textarea>
<button onclick="addRecipe()">Ajouter</button>
</div>

<div id="recipes"></div>

<script>

const defaultFoods = [
"Poulet","Boeuf","Saumon","Thon","Oeuf","Blanc d'oeuf","Skyr","Yaourt grec",
"Riz","Riz complet","P√¢tes","Quinoa","Semoule","Pain complet","Wrap","Flocons d‚Äôavoine",
"Banane","Pomme","Fraise","Myrtille","Mangue","Avocat","Brocoli","Courgette",
"Carotte","Poivron","Tomate","Concombre","√âpinard","Champignon",
"Huile d‚Äôolive","Beurre","Cr√®me fra√Æche","Lait","Lait d‚Äôamande","Lait de coco",
"Whey","Chocolat noir","Miel","Sucre","Farine","Levure"
];

let recipes = JSON.parse(localStorage.getItem("recipes_v2")||"[]");

function save(){
localStorage.setItem("recipes_v2",JSON.stringify(recipes));
}

function render(){
const container=document.getElementById("recipes");
container.innerHTML="";
recipes.forEach((r,i)=>{
container.innerHTML+=`
<div class="card">
<h3>${r.title}</h3>
<strong>Ingr√©dients:</strong>
<pre>${r.ingredients}</pre>
<strong>Instructions:</strong>
<pre>${r.instructions}</pre>
<button onclick="deleteRecipe(${i})">Supprimer</button>
</div>
`;
});
}

function addRecipe(){
const title=document.getElementById("title").value;
const ingredients=document.getElementById("ingredients").value;
const instructions=document.getElementById("instructions").value;
if(!title) return alert("Ajoute un nom");
recipes.unshift({title,ingredients,instructions});
save();
render();
}

function importRecipe(){
const text=document.getElementById("importText").value;
if(!text) return alert("Colle une recette");
let title = text.match(/Nom:(.*)/i);
let ingredients = text.match(/Ingr√©dients:(.*?)(Instructions:)/is);
let instructions = text.match(/Instructions:(.*)/is);

title = title ? title[1].trim() : "Recette import√©e";
ingredients = ingredients ? ingredients[1].trim() : "";
instructions = instructions ? instructions[1].trim() : "";

recipes.unshift({title,ingredients,instructions});
save();
render();
document.getElementById("importText").value="";
}

function deleteRecipe(i){
if(confirm("Supprimer cette recette ?")){
recipes.splice(i,1);
save();
render();
}
}

render();

</script>

</body>
</html>
