<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ton carnet</title>
<style>
:root{
  --bg:#f6f7fb; --paper:#ffffff; --ink:#121826; --muted:#5b6477; --line:#e7e9f1;
  --shadow:0 12px 36px rgba(16,24,40,.10); --shadow2:0 6px 18px rgba(16,24,40,.08);
  --accent:#6d5efc; --ok:#22c55e; --warn:#f59e0b; --danger:#ef4444;
  --r:18px; --r2:14px; --max:1200px;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}
*{box-sizing:border-box}
body{margin:0; font-family:var(--sans); color:var(--ink);
  background:
    radial-gradient(900px 500px at 15% 0%, rgba(109,94,252,.10), transparent 55%),
    radial-gradient(800px 460px at 90% 10%, rgba(34,197,94,.08), transparent 55%),
    linear-gradient(180deg, var(--bg), #ffffff);
}
.wrap{max-width:var(--max); margin:0 auto; padding:22px 16px 70px;}
header{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 0 14px;}
.brand{display:flex; align-items:center; gap:12px}
.logo{width:42px; height:42px; border-radius:14px; background:linear-gradient(135deg, rgba(109,94,252,.95), rgba(109,94,252,.20));
  box-shadow:var(--shadow2);}
h1{margin:0; font-size:20px; letter-spacing:.2px}
.sub{margin-top:4px; color:var(--muted); font-size:12.5px; line-height:1.35}
.actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
.btn{border:1px solid var(--line); background:var(--paper); color:var(--ink);
  padding:10px 12px; border-radius:14px; cursor:pointer; display:inline-flex; gap:8px; align-items:center;
  box-shadow:var(--shadow2); font-weight:800; font-size:13px; user-select:none;}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.primary{border-color:rgba(109,94,252,.22); background:rgba(109,94,252,.10);}
.btn.danger{border-color:rgba(239,68,68,.25); background:rgba(239,68,68,.08);}
.btn.ghost{background:transparent; box-shadow:none}
.tabs{display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 14px;}
.tab{padding:9px 12px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.7); color:var(--muted);
  font-weight:850; font-size:13px; cursor:pointer; user-select:none;}
.tab.active{color:var(--ink); border-color:rgba(109,94,252,.28); background:rgba(109,94,252,.10);}
.grid2{display:grid; grid-template-columns:1.2fr .8fr; gap:12px;}
@media (max-width: 980px){ .grid2{grid-template-columns:1fr;} }
.card{background:var(--paper); border:1px solid var(--line); border-radius:var(--r); box-shadow:var(--shadow); padding:16px;}
.h2{font-size:26px; margin:0; letter-spacing:.2px}
.small{color:var(--muted); margin-top:8px; line-height:1.55; font-size:13px}
.row{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
.chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
  border:1px solid var(--line); background:#fff; color:var(--muted); font-size:13px; font-weight:850; cursor:pointer; user-select:none;}
.chip:hover{border-color:rgba(109,94,252,.35); color:var(--ink);}
.chip.active{border-color:rgba(109,94,252,.35); background:rgba(109,94,252,.10); color:var(--ink);}
.pill{font-size:11px; padding:5px 9px; border-radius:999px; border:1px solid var(--line); color:var(--muted); background:#fff; font-weight:850;}
.pill.accent{border-color:rgba(109,94,252,.25); background:rgba(109,94,252,.10); color:var(--ink);}
.pill.ok{border-color:rgba(34,197,94,.25); background:rgba(34,197,94,.10); color:var(--ink);}
.pill.warn{border-color:rgba(245,158,11,.25); background:rgba(245,158,11,.10); color:var(--ink);}
.panel{background:var(--paper); border:1px solid var(--line); border-radius:var(--r); box-shadow:var(--shadow); padding:14px;}
.controls{display:grid; grid-template-columns:1.3fr .8fr .8fr .8fr .8fr .7fr; gap:10px; align-items:end; margin-top:10px;}
@media (max-width: 980px){ .controls{grid-template-columns:1fr 1fr;} }
@media (max-width: 540px){ .controls{grid-template-columns:1fr;} }
label{font-size:12px; color:var(--muted); display:block; margin:0 0 6px}
input, select, textarea{width:100%; padding:11px 12px; border-radius:14px; border:1px solid var(--line); background:#fff; color:var(--ink); outline:none;}
textarea{min-height:92px; resize:vertical}
.masonry{margin-top:14px; column-count:3; column-gap:12px;}
@media (max-width: 980px){ .masonry{column-count:2;} }
@media (max-width: 620px){ .masonry{column-count:1;} }
.rcard{break-inside:avoid; margin:0 0 12px; border-radius:var(--r2); overflow:hidden; border:1px solid var(--line);
  background:var(--paper); box-shadow:var(--shadow2); cursor:pointer; transition:transform .08s ease, border-color .2s ease;}
.rcard:hover{transform:translateY(-2px); border-color:rgba(109,94,252,.20);}
.thumb{height:170px; background:linear-gradient(135deg, rgba(109,94,252,.12), rgba(34,197,94,.08));
  display:flex; align-items:center; justify-content:center; color:rgba(18,24,38,.55); font-weight:950; letter-spacing:.2px;}
.thumb img{width:100%; height:100%; object-fit:cover; display:block}
.body{padding:12px 12px 14px}
.name{margin:0; font-size:16px; font-weight:950;}
.meta{margin-top:8px; color:var(--muted); font-size:12px; line-height:1.35}
.row2{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
.overlay{position:fixed; inset:0; background:rgba(16,24,40,.35); display:none; align-items:center; justify-content:center; padding:18px; z-index:50;}
.modal{width:min(1040px, 100%); max-height:88vh; overflow:auto; border-radius:24px; border:1px solid var(--line);
  background:var(--paper); box-shadow:0 26px 90px rgba(16,24,40,.22);}
.mh{display:flex; justify-content:space-between; align-items:center; gap:10px; padding:14px 14px 10px; border-bottom:1px solid var(--line);
  position:sticky; top:0; background:rgba(255,255,255,.92); backdrop-filter: blur(10px); z-index:2;}
.mt{font-weight:950; font-size:14px; color:var(--ink);}
.mb{padding:14px}
.div{height:1px; background:var(--line); margin:12px 0}
.two{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
@media (max-width: 900px){ .two{grid-template-columns:1fr;} }
.img{width:100%; height:260px; border-radius:18px; border:1px solid var(--line); overflow:hidden; background:#fafbff;
  display:flex; align-items:center; justify-content:center; color:rgba(18,24,38,.55); font-weight:950;}
.img img{width:100%; height:100%; object-fit:cover; display:block}
table{width:100%; border-collapse:collapse; overflow:hidden; border-radius:16px; border:1px solid var(--line);}
th,td{padding:10px; font-size:13px; border-bottom:1px solid var(--line); vertical-align:top}
th{color:var(--muted); font-weight:950; text-align:left; background:#fbfcff;}
tr:last-child td{border-bottom:none}
.right{display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap}
.mini{font-size:12px; color:var(--muted); margin-top:6px; line-height:1.35}
.toast{position:fixed; left:50%; bottom:18px; transform:translateX(-50%); background:var(--paper);
  border:1px solid var(--line); color:var(--ink); padding:10px 12px; border-radius:999px; box-shadow:var(--shadow); display:none; z-index:80; font-size:13px; font-weight:850;}
.kbd{border:1px solid var(--line); background:#fff; border-radius:8px; padding:1px 6px; font-weight:900;}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>Ton carnet</h1>
        <div class="sub">500 aliments ‚Ä¢ Healthy / Gourmand ‚Ä¢ Entr√©e / Plat / Dessert / Bakery ‚Ä¢ Import intelligent ‚Ä¢ Mode √©dition (PIN)</div>
      </div>
    </div>
    <div class="actions">
      <button class="btn ghost" id="btnToggleEdit">üîí Mode √©dition</button>
      <button class="btn primary adminOnly" id="btnNew" style="display:none">Ôºã Nouvelle</button>
      <button class="btn adminOnly" id="btnOpenImport" style="display:none">üßæ Import Word</button>
      <button class="btn adminOnly" id="btnFoods" style="display:none">ü•ó Aliments</button>
    </div>
  </header>

  <div class="tabs">
    <div class="tab active" data-view="home">Accueil</div>
    <div class="tab" data-view="recipes">Recettes</div>
  </div>

  <div id="viewHome">
    <div class="grid2">
      <div class="card">
        <h2 class="h2">Ton carnet</h2>
        <div class="small">Clique une cat√©gorie. Ensuite, tu peux choisir une sous-cat√©gorie. Pour ajouter / modifier / supprimer : <span class="kbd">Mode √©dition</span> (PIN).</div>
        <div class="row" id="statsHome"></div>
      </div>
      <div class="card">
        <div class="mini"><strong>Cat√©gories</strong></div>
        <div class="row" id="homeMain"></div>
        <div class="div"></div>
        <div class="mini"><strong>Sous-cat√©gories</strong> <span id="subHint" class="mini"></span></div>
        <div class="row" id="homeSub"></div>
      </div>
    </div>
  </div>

  <div id="viewRecipes" style="display:none">
    <div class="panel">
      <div class="row" style="margin-top:0; justify-content:space-between; align-items:center">
        <div class="mini"><strong>Filtres rapides</strong></div>
        <div class="row" id="quickSubs" style="margin-top:0"></div>
      </div>
      <div class="controls">
        <div><label>Recherche intelligente</label><input id="q" type="text" placeholder="ex: poulet curry, banana bread‚Ä¶"/></div>
        <div><label>Cat√©gorie</label><select id="mainCat"><option value="">Toutes</option></select></div>
        <div><label>Sous-cat√©gorie</label><select id="subCat"><option value="">Toutes</option></select></div>
        <div><label>Difficult√©</label><select id="diff"><option value="">Toutes</option><option>Facile</option><option>Moyen</option><option>Difficile</option></select></div>
        <div><label>Trier</label><select id="sort"><option value="recent">R√©cent</option><option value="name">Nom</option><option value="kcal">Calories</option><option value="protein">Prot√©ines</option><option value="time">Temps</option></select></div>
        <div class="right"><button class="btn" id="btnReset">‚Ü∫ Reset</button></div>
      </div>
    </div>
    <div class="row" id="statsRecipes" style="margin-top:12px"></div>
    <div id="grid" class="masonry"></div>
  </div>
</div>

<div class="overlay" id="overlayView"><div class="modal">
  <div class="mh">
    <div class="mt" id="viewTitle">Recette</div>
    <div class="right">
      <button class="btn adminOnly" id="btnEdit" style="display:none">‚úèÔ∏è</button>
      <button class="btn danger adminOnly" id="btnDelete" style="display:none">üóë</button>
      <button class="btn" id="btnCloseView">‚úï</button>
    </div>
  </div>
  <div class="mb" id="viewBody"></div>
</div></div>

<div class="overlay" id="overlayPin"><div class="modal" style="max-width:520px">
  <div class="mh"><div class="mt">Mode √©dition</div><div class="right"><button class="btn" id="btnClosePin">‚úï</button></div></div>
  <div class="mb">
    <div class="mini">PIN par d√©faut : <span class="kbd">1234</span></div>
    <div style="margin-top:10px">
      <input id="pinInput" type="number" inputmode="numeric" placeholder="Code PIN"/>
      <div class="right" style="margin-top:10px">
        <button class="btn danger" id="btnPinOff">D√©sactiver</button>
        <button class="btn primary" id="btnPinOk">Activer</button>
      </div>
    </div>
  </div>
</div></div>

<div class="overlay" id="overlayForm"><div class="modal">
  <div class="mh">
    <div class="mt" id="formTitle">Nouvelle recette</div>
    <div class="right"><button class="btn primary" id="btnSave">üíæ</button><button class="btn" id="btnCloseForm">‚úï</button></div>
  </div>
  <div class="mb">
    <div class="two">
      <div>
        <div class="img" id="formImgBox"><span>Photo</span></div>
        <div class="mini">Photo l√©g√®re (‚âà2‚Äì2.5MB).</div>
        <div class="right" style="margin-top:10px">
          <input type="file" id="photo" accept="image/*"/>
          <button class="btn" id="btnRemovePhoto" type="button">Retirer</button>
        </div>
        <div class="div"></div>
        <label class="mini"><input type="checkbox" id="autoMacros" checked/> Calcul auto des macros</label>
      </div>
      <div>
        <label>Titre</label><input id="f_name" type="text"/>
        <div class="two" style="gap:10px">
          <div><label>Cat√©gorie</label><select id="f_mainCat"></select></div>
          <div><label>Sous-cat√©gorie</label><select id="f_subCat"></select></div>
        </div>
        <div class="two" style="gap:10px; margin-top:10px">
          <div><label>Difficult√©</label><select id="f_diff"><option>Facile</option><option>Moyen</option><option>Difficile</option></select></div>
          <div><label>Temps (min)</label><input id="f_time" type="number" min="0" step="1"/></div>
        </div>
        <div class="two" style="gap:10px; margin-top:10px">
          <div><label>Portions</label><input id="f_serv" type="number" min="1" step="1" value="1"/></div>
          <div></div>
        </div>
        <div class="two" style="gap:10px; margin-top:10px">
          <div><label>kcal</label><input id="f_kcal" type="number"/></div>
          <div><label>Prot√©ines</label><input id="f_p" type="number" step="0.1"/></div>
        </div>
        <div class="two" style="gap:10px; margin-top:10px">
          <div><label>Glucides</label><input id="f_c" type="number" step="0.1"/></div>
          <div><label>Lipides</label><input id="f_f" type="number" step="0.1"/></div>
        </div>
        <label style="margin-top:10px">Notes</label><textarea id="f_notes"></textarea>
      </div>
    </div>

    <div class="div"></div>
    <div class="right" style="justify-content:space-between">
      <div class="mini">Ingr√©dients (grammes) ‚Ä¢ Base aliments: <strong>500</strong></div>
      <button class="btn" id="btnAddIng" type="button">Ôºã</button>
    </div>

    <div style="margin-top:10px; overflow:auto">
      <table>
        <thead><tr><th>Aliment</th><th>g</th><th>Label (option)</th><th>Note</th><th></th></tr></thead>
        <tbody id="ingBody"></tbody>
      </table>
    </div>

    <div class="div"></div>
    <label>Instructions</label>
    <textarea id="f_steps"></textarea>
  </div>
</div></div>

<div class="overlay" id="overlayImport"><div class="modal">
  <div class="mh">
    <div class="mt">Import Word / Texte</div>
    <div class="right"><button class="btn primary" id="btnDoImport">Importer</button><button class="btn" id="btnCloseImport">‚úï</button></div>
  </div>
  <div class="mb">
    <pre class="panel" style="white-space:pre-wrap; padding:12px; border-radius:16px; overflow:auto">Nom: ...
Ingr√©dients:
1 oeuf
1 yaourt
1 c√†s huile d'olive
150 g poulet
70 g riz basmati
Instructions:
1) ...</pre>
    <label>Colle ton texte</label><textarea id="importText"></textarea>
    <div class="div"></div>
    <div class="mini"><strong>Non reconnus / ambigu :</strong></div>
    <div class="mini" id="importUnknown">‚Äî</div>
  </div>
</div></div>

<div class="overlay" id="overlayFoods"><div class="modal">
  <div class="mh">
    <div class="mt">Aliments (par 100g) ‚Ä¢ 500</div>
    <div class="right"><button class="btn primary" id="btnAddFood">Ôºã</button><button class="btn" id="btnCloseFoods">‚úï</button></div>
  </div>
  <div class="mb" id="foodsBody"></div>
</div></div>

<div class="toast" id="toast"></div>

<script>
const EDIT_PIN="1234";
const STORAGE_KEY="recipes_premium_V5_light_v1";
const FOODS_KEY="foods_premium_V5_light_v1";
const MAIN_CATS=["Healthy","Gourmand"];
const SUB_CATS=["Entr√©e","Plat","Dessert","Bakery"];
const DEFAULT_FOODS=[{"id": "poulet_blanc_cru_000", "name": "Poulet (blanc, cru)", "kcal": 120.0, "p": 23.0, "c": 0.0, "f": 2.6}, {"id": "poulet_r√¥ti_001", "name": "Poulet r√¥ti", "kcal": 190.0, "p": 29.0, "c": 0.0, "f": 7.0}, {"id": "dinde_crue_002", "name": "Dinde (crue)", "kcal": 110.0, "p": 24.0, "c": 0.0, "f": 1.5}, {"id": "boeuf_steak_5_003", "name": "Boeuf (steak 5%)", "kcal": 137.0, "p": 21.0, "c": 0.0, "f": 5.0}, {"id": "boeuf_hach√©_15_004", "name": "Boeuf (hach√© 15%)", "kcal": 215.0, "p": 19.0, "c": 0.0, "f": 15.0}, {"id": "jambon_blanc_005", "name": "Jambon blanc", "kcal": 115.0, "p": 19.0, "c": 1.0, "f": 4.0}, {"id": "bacon_006", "name": "Bacon", "kcal": 541.0, "p": 37.0, "c": 1.4, "f": 42.0}, {"id": "lardons_007", "name": "Lardons", "kcal": 305.0, "p": 16.0, "c": 1.0, "f": 27.0}, {"id": "chorizo_008", "name": "Chorizo", "kcal": 455.0, "p": 24.0, "c": 2.0, "f": 38.0}, {"id": "tofu_nature_009", "name": "Tofu nature", "kcal": 120.0, "p": 13.0, "c": 2.0, "f": 7.0}, {"id": "tofu_fum√©_010", "name": "Tofu fum√©", "kcal": 150.0, "p": 16.0, "c": 2.0, "f": 9.0}, {"id": "tempeh_011", "name": "Tempeh", "kcal": 193.0, "p": 20.0, "c": 9.0, "f": 11.0}, {"id": "seitan_012", "name": "Seitan", "kcal": 140.0, "p": 28.0, "c": 5.0, "f": 1.5}, {"id": "oeuf_entier_013", "name": "Oeuf entier", "kcal": 143.0, "p": 13.0, "c": 1.0, "f": 10.0}, {"id": "blanc_d_oeuf_014", "name": "Blanc d'oeuf", "kcal": 52.0, "p": 11.0, "c": 0.7, "f": 0.2}, {"id": "saumon_015", "name": "Saumon", "kcal": 208.0, "p": 20.0, "c": 0.0, "f": 13.0}, {"id": "thon_au_naturel_016", "name": "Thon (au naturel)", "kcal": 116.0, "p": 26.0, "c": 0.0, "f": 1.0}, {"id": "cabillaud_017", "name": "Cabillaud", "kcal": 82.0, "p": 18.0, "c": 0.0, "f": 0.7}, {"id": "crevettes_018", "name": "Crevettes", "kcal": 99.0, "p": 24.0, "c": 0.2, "f": 0.3}, {"id": "sardines_019", "name": "Sardines", "kcal": 208.0, "p": 25.0, "c": 0.0, "f": 11.0}, {"id": "maquereau_020", "name": "Maquereau", "kcal": 205.0, "p": 19.0, "c": 0.0, "f": 14.0}, {"id": "moules_021", "name": "Moules", "kcal": 86.0, "p": 12.0, "c": 4.0, "f": 2.0}, {"id": "skyr_0_022", "name": "Skyr 0%", "kcal": 60.0, "p": 11.0, "c": 4.0, "f": 0.2}, {"id": "fromage_blanc_0_023", "name": "Fromage blanc 0%", "kcal": 46.0, "p": 8.0, "c": 4.0, "f": 0.2}, {"id": "yaourt_grec_0_024", "name": "Yaourt grec 0%", "kcal": 59.0, "p": 10.0, "c": 3.6, "f": 0.4}, {"id": "lait_demi_√©cr√©m√©_025", "name": "Lait demi-√©cr√©m√©", "kcal": 47.0, "p": 3.4, "c": 4.8, "f": 1.6}, {"id": "beurre_026", "name": "Beurre", "kcal": 717.0, "p": 1.0, "c": 0.0, "f": 81.0}, {"id": "mascarpone_027", "name": "Mascarpone", "kcal": 420.0, "p": 6.0, "c": 4.0, "f": 42.0}, {"id": "philadelphia_028", "name": "Philadelphia", "kcal": 342.0, "p": 6.0, "c": 4.0, "f": 34.0}, {"id": "riz_basmati_cru_029", "name": "Riz basmati (cru)", "kcal": 360.0, "p": 7.0, "c": 80.0, "f": 1.0}, {"id": "riz_basmati_cuit_030", "name": "Riz basmati (cuit)", "kcal": 130.0, "p": 2.7, "c": 28.0, "f": 0.3}, {"id": "p√¢tes_crues_031", "name": "P√¢tes (crues)", "kcal": 350.0, "p": 12.0, "c": 72.0, "f": 1.5}, {"id": "avoine_flocons_032", "name": "Avoine (flocons)", "kcal": 389.0, "p": 17.0, "c": 66.0, "f": 7.0}, {"id": "pain_complet_033", "name": "Pain complet", "kcal": 247.0, "p": 9.0, "c": 41.0, "f": 4.2}, {"id": "lentilles_cuites_034", "name": "Lentilles (cuites)", "kcal": 116.0, "p": 9.0, "c": 20.0, "f": 0.4}, {"id": "pois_chiches_cuits_035", "name": "Pois chiches (cuits)", "kcal": 164.0, "p": 9.0, "c": 27.0, "f": 2.6}, {"id": "haricots_rouges_cuits_036", "name": "Haricots rouges (cuits)", "kcal": 127.0, "p": 9.0, "c": 23.0, "f": 0.5}, {"id": "edamame_037", "name": "Edamame", "kcal": 122.0, "p": 11.9, "c": 9.9, "f": 5.2}, {"id": "tomate_038", "name": "Tomate", "kcal": 18.0, "p": 0.9, "c": 3.9, "f": 0.2}, {"id": "courgette_039", "name": "Courgette", "kcal": 17.0, "p": 1.2, "c": 3.1, "f": 0.3}, {"id": "carotte_040", "name": "Carotte", "kcal": 41.0, "p": 0.9, "c": 9.6, "f": 0.2}, {"id": "brocoli_041", "name": "Brocoli", "kcal": 34.0, "p": 2.8, "c": 6.6, "f": 0.4}, {"id": "√©pinards_042", "name": "√âpinards", "kcal": 23.0, "p": 2.9, "c": 1.4, "f": 0.4}, {"id": "champignons_043", "name": "Champignons", "kcal": 22.0, "p": 3.1, "c": 3.3, "f": 0.3}, {"id": "pomme_de_terre_044", "name": "Pomme de terre", "kcal": 77.0, "p": 2.0, "c": 17.0, "f": 0.1}, {"id": "patate_douce_045", "name": "Patate douce", "kcal": 86.0, "p": 1.6, "c": 20.0, "f": 0.1}, {"id": "avocat_046", "name": "Avocat", "kcal": 160.0, "p": 2.0, "c": 9.0, "f": 15.0}, {"id": "banane_047", "name": "Banane", "kcal": 89.0, "p": 1.1, "c": 23.0, "f": 0.3}, {"id": "pomme_048", "name": "Pomme", "kcal": 52.0, "p": 0.3, "c": 14.0, "f": 0.2}, {"id": "fraise_049", "name": "Fraise", "kcal": 32.0, "p": 0.7, "c": 7.7, "f": 0.3}, {"id": "dattes_050", "name": "Dattes", "kcal": 282.0, "p": 2.5, "c": 75.0, "f": 0.4}, {"id": "raisin_sec_051", "name": "Raisin sec", "kcal": 299.0, "p": 3.1, "c": 79.0, "f": 0.5}, {"id": "amandes_052", "name": "Amandes", "kcal": 579.0, "p": 21.0, "c": 22.0, "f": 50.0}, {"id": "noix_053", "name": "Noix", "kcal": 654.0, "p": 15.0, "c": 14.0, "f": 65.0}, {"id": "beurre_de_cacahu√®te_054", "name": "Beurre de cacahu√®te", "kcal": 588.0, "p": 25.0, "c": 20.0, "f": 50.0}, {"id": "graines_de_chia_055", "name": "Graines de chia", "kcal": 486.0, "p": 17.0, "c": 42.0, "f": 31.0}, {"id": "tahini_056", "name": "Tahini", "kcal": 595.0, "p": 17.0, "c": 21.0, "f": 54.0}, {"id": "huile_d_olive_057", "name": "Huile d'olive", "kcal": 884.0, "p": 0.0, "c": 0.0, "f": 100.0}, {"id": "sucre_058", "name": "Sucre", "kcal": 400.0, "p": 0.0, "c": 100.0, "f": 0.0}, {"id": "miel_059", "name": "Miel", "kcal": 304.0, "p": 0.3, "c": 82.0, "f": 0.0}, {"id": "sirop_d_√©rable_060", "name": "Sirop d'√©rable", "kcal": 260.0, "p": 0.0, "c": 67.0, "f": 0.1}, {"id": "confiture_061", "name": "Confiture", "kcal": 250.0, "p": 0.4, "c": 60.0, "f": 0.2}, {"id": "p√¢te_√†_tartiner_062", "name": "P√¢te √† tartiner", "kcal": 540.0, "p": 7.0, "c": 57.0, "f": 32.0}, {"id": "whey_063", "name": "Whey", "kcal": 400.0, "p": 80.0, "c": 8.0, "f": 6.0}, {"id": "barre_prot√©in√©e_064", "name": "Barre prot√©in√©e", "kcal": 350.0, "p": 30.0, "c": 35.0, "f": 10.0}, {"id": "houmous_065", "name": "Houmous", "kcal": 170.0, "p": 8.0, "c": 14.0, "f": 9.0}, {"id": "guacamole_066", "name": "Guacamole", "kcal": 170.0, "p": 2.0, "c": 8.0, "f": 15.0}, {"id": "poulet_cuisse_sans_peau_067", "name": "Poulet (cuisse, sans peau)", "kcal": 165.0, "p": 27.0, "c": 0.0, "f": 7.0}, {"id": "porc_filet_068", "name": "Porc (filet)", "kcal": 165.0, "p": 27.0, "c": 0.0, "f": 7.0}, {"id": "veau_escalope_069", "name": "Veau (escalope)", "kcal": 165.0, "p": 27.0, "c": 0.0, "f": 7.0}, {"id": "agneau_gigot_070", "name": "Agneau (gigot)", "kcal": 165.0, "p": 27.0, "c": 0.0, "f": 7.0}, {"id": "saucisse_071", "name": "Saucisse", "kcal": 165.0, "p": 27.0, "c": 0.0, "f": 7.0}, {"id": "steak_v√©g√©tal_072", "name": "Steak v√©g√©tal", "kcal": 165.0, "p": 27.0, "c": 0.0, "f": 7.0}, {"id": "truite_073", "name": "Truite", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "colin_074", "name": "Colin", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "lieu_noir_075", "name": "Lieu noir", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "anchois_076", "name": "Anchois", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "calamar_077", "name": "Calamar", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "poulpe_078", "name": "Poulpe", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "noix_de_saint_jacques_079", "name": "Noix de Saint-Jacques", "kcal": 140.0, "p": 20.0, "c": 0.0, "f": 6.0}, {"id": "fromage_blanc_3_080", "name": "Fromage blanc 3%", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "yaourt_nature_081", "name": "Yaourt nature", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "yaourt_au_soja_082", "name": "Yaourt au soja", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "cottage_cheese_083", "name": "Cottage cheese", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "ricotta_084", "name": "Ricotta", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "mozzarella_085", "name": "Mozzarella", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "feta_086", "name": "Feta", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "ch√®vre_087", "name": "Ch√®vre", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "emmental_088", "name": "Emmental", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "parmesan_089", "name": "Parmesan", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "lait_√©cr√©m√©_090", "name": "Lait √©cr√©m√©", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "lait_entier_091", "name": "Lait entier", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "lait_d_amande_sans_sucre_092", "name": "Lait d'amande (sans sucre)", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "lait_de_soja_093", "name": "Lait de soja", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "lait_de_coco_094", "name": "Lait de coco", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "k√©fir_095", "name": "K√©fir", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "cr√®me_fra√Æche_30_096", "name": "Cr√®me fra√Æche 30%", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "cr√®me_liquide_15_097", "name": "Cr√®me liquide 15%", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "margarine_098", "name": "Margarine", "kcal": 110.0, "p": 7.0, "c": 6.0, "f": 6.0}, {"id": "riz_complet_cru_099", "name": "Riz complet (cru)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "riz_complet_cuit_100", "name": "Riz complet (cuit)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "riz_sushi_cru_101", "name": "Riz sushi (cru)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "p√¢tes_cuites_102", "name": "P√¢tes (cuites)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "p√¢tes_compl√®tes_crues_103", "name": "P√¢tes compl√®tes (crues)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "p√¢tes_compl√®tes_cuites_104", "name": "P√¢tes compl√®tes (cuites)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "nouilles_crues_105", "name": "Nouilles (crues)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "nouilles_cuites_106", "name": "Nouilles (cuites)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "quinoa_cru_107", "name": "Quinoa (cru)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "quinoa_cuit_108", "name": "Quinoa (cuit)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "boulgour_cru_109", "name": "Boulgour (cru)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "boulgour_cuit_110", "name": "Boulgour (cuit)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "semoule_crue_111", "name": "Semoule (crue)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "couscous_cuit_112", "name": "Couscous (cuit)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "son_d_avoine_113", "name": "Son d'avoine", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "farine_de_bl√©_114", "name": "Farine de bl√©", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "farine_compl√®te_115", "name": "Farine compl√®te", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "ma√Øzena_116", "name": "Ma√Øzena", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "pain_blanc_117", "name": "Pain blanc", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "pain_de_mie_118", "name": "Pain de mie", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "pain_au_levain_119", "name": "Pain au levain", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "bagel_120", "name": "Bagel", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "pita_121", "name": "Pita", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "wrap_tortilla_122", "name": "Wrap / tortilla", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "brioche_123", "name": "Brioche", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "croissant_124", "name": "Croissant", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "p√¢te_feuillet√©e_125", "name": "P√¢te feuillet√©e", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "p√¢te_bris√©e_126", "name": "P√¢te bris√©e", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "p√¢te_√†_pizza_127", "name": "P√¢te √† pizza", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "gnocchi_128", "name": "Gnocchi", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "polenta_cuite_129", "name": "Polenta (cuite)", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "muesli_130", "name": "Muesli", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "granola_131", "name": "Granola", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "c√©r√©ales_nature_132", "name": "C√©r√©ales nature", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "riz_souffl√©_133", "name": "Riz souffl√©", "kcal": 330.0, "p": 10.0, "c": 65.0, "f": 4.0}, {"id": "haricots_blancs_cuits_134", "name": "Haricots blancs (cuits)", "kcal": 120.0, "p": 8.0, "c": 20.0, "f": 1.0}, {"id": "haricots_noirs_cuits_135", "name": "Haricots noirs (cuits)", "kcal": 120.0, "p": 8.0, "c": 20.0, "f": 1.0}, {"id": "petits_pois_136", "name": "Petits pois", "kcal": 120.0, "p": 8.0, "c": 20.0, "f": 1.0}, {"id": "f√®ves_137", "name": "F√®ves", "kcal": 120.0, "p": 8.0, "c": 20.0, "f": 1.0}, {"id": "lentilles_corail_crues_138", "name": "Lentilles corail (crues)", "kcal": 120.0, "p": 8.0, "c": 20.0, "f": 1.0}, {"id": "tomate_cru_139", "name": "Tomate (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cuit_140", "name": "Tomate (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_vapeur_141", "name": "Tomate (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_r√¥ti_142", "name": "Tomate (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_grill√©_143", "name": "Tomate (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_saut√©_144", "name": "Tomate (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_en_conserve_145", "name": "Tomate (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_surgel√©_146", "name": "Tomate (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_cru_147", "name": "Tomate cerise (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_cuit_148", "name": "Tomate cerise (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_vapeur_149", "name": "Tomate cerise (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_r√¥ti_150", "name": "Tomate cerise (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_grill√©_151", "name": "Tomate cerise (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_saut√©_152", "name": "Tomate cerise (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_en_conserve_153", "name": "Tomate cerise (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "tomate_cerise_surgel√©_154", "name": "Tomate cerise (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_cru_155", "name": "Concombre (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_cuit_156", "name": "Concombre (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_vapeur_157", "name": "Concombre (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_r√¥ti_158", "name": "Concombre (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_grill√©_159", "name": "Concombre (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_saut√©_160", "name": "Concombre (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_en_conserve_161", "name": "Concombre (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "concombre_surgel√©_162", "name": "Concombre (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_cru_163", "name": "Courgette (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_cuit_164", "name": "Courgette (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_vapeur_165", "name": "Courgette (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_r√¥ti_166", "name": "Courgette (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_grill√©_167", "name": "Courgette (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_saut√©_168", "name": "Courgette (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_en_conserve_169", "name": "Courgette (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courgette_surgel√©_170", "name": "Courgette (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_cru_171", "name": "Aubergine (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_cuit_172", "name": "Aubergine (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_vapeur_173", "name": "Aubergine (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_r√¥ti_174", "name": "Aubergine (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_grill√©_175", "name": "Aubergine (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_saut√©_176", "name": "Aubergine (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_en_conserve_177", "name": "Aubergine (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "aubergine_surgel√©_178", "name": "Aubergine (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_cru_179", "name": "Poivron rouge (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_cuit_180", "name": "Poivron rouge (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_vapeur_181", "name": "Poivron rouge (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_r√¥ti_182", "name": "Poivron rouge (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_grill√©_183", "name": "Poivron rouge (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_saut√©_184", "name": "Poivron rouge (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_en_conserve_185", "name": "Poivron rouge (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_rouge_surgel√©_186", "name": "Poivron rouge (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_cru_187", "name": "Poivron vert (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_cuit_188", "name": "Poivron vert (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_vapeur_189", "name": "Poivron vert (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_r√¥ti_190", "name": "Poivron vert (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_grill√©_191", "name": "Poivron vert (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_saut√©_192", "name": "Poivron vert (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_en_conserve_193", "name": "Poivron vert (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_vert_surgel√©_194", "name": "Poivron vert (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_cru_195", "name": "Poivron jaune (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_cuit_196", "name": "Poivron jaune (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_vapeur_197", "name": "Poivron jaune (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_r√¥ti_198", "name": "Poivron jaune (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_grill√©_199", "name": "Poivron jaune (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_saut√©_200", "name": "Poivron jaune (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_en_conserve_201", "name": "Poivron jaune (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poivron_jaune_surgel√©_202", "name": "Poivron jaune (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_cru_203", "name": "Carotte (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_cuit_204", "name": "Carotte (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_vapeur_205", "name": "Carotte (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_r√¥ti_206", "name": "Carotte (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_grill√©_207", "name": "Carotte (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_saut√©_208", "name": "Carotte (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_en_conserve_209", "name": "Carotte (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "carotte_surgel√©_210", "name": "Carotte (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_cru_211", "name": "Betterave (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_cuit_212", "name": "Betterave (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_vapeur_213", "name": "Betterave (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_r√¥ti_214", "name": "Betterave (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_grill√©_215", "name": "Betterave (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_saut√©_216", "name": "Betterave (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_en_conserve_217", "name": "Betterave (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "betterave_surgel√©_218", "name": "Betterave (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_cru_219", "name": "Radis (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_cuit_220", "name": "Radis (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_vapeur_221", "name": "Radis (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_r√¥ti_222", "name": "Radis (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_grill√©_223", "name": "Radis (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_saut√©_224", "name": "Radis (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_en_conserve_225", "name": "Radis (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "radis_surgel√©_226", "name": "Radis (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_cru_227", "name": "Navet (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_cuit_228", "name": "Navet (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_vapeur_229", "name": "Navet (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_r√¥ti_230", "name": "Navet (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_grill√©_231", "name": "Navet (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_saut√©_232", "name": "Navet (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_en_conserve_233", "name": "Navet (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "navet_surgel√©_234", "name": "Navet (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_cru_235", "name": "Fenouil (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_cuit_236", "name": "Fenouil (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_vapeur_237", "name": "Fenouil (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_r√¥ti_238", "name": "Fenouil (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_grill√©_239", "name": "Fenouil (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_saut√©_240", "name": "Fenouil (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_en_conserve_241", "name": "Fenouil (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "fenouil_surgel√©_242", "name": "Fenouil (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_cru_243", "name": "C√©leri branche (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_cuit_244", "name": "C√©leri branche (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_vapeur_245", "name": "C√©leri branche (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_r√¥ti_246", "name": "C√©leri branche (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_grill√©_247", "name": "C√©leri branche (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_saut√©_248", "name": "C√©leri branche (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_en_conserve_249", "name": "C√©leri branche (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_branche_surgel√©_250", "name": "C√©leri branche (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_cru_251", "name": "C√©leri rave (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_cuit_252", "name": "C√©leri rave (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_vapeur_253", "name": "C√©leri rave (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_r√¥ti_254", "name": "C√©leri rave (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_grill√©_255", "name": "C√©leri rave (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_saut√©_256", "name": "C√©leri rave (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_en_conserve_257", "name": "C√©leri rave (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "c√©leri_rave_surgel√©_258", "name": "C√©leri rave (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_cru_259", "name": "Oignon (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_cuit_260", "name": "Oignon (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_vapeur_261", "name": "Oignon (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_r√¥ti_262", "name": "Oignon (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_grill√©_263", "name": "Oignon (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_saut√©_264", "name": "Oignon (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_en_conserve_265", "name": "Oignon (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_surgel√©_266", "name": "Oignon (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_cru_267", "name": "Oignon rouge (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_cuit_268", "name": "Oignon rouge (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_vapeur_269", "name": "Oignon rouge (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_r√¥ti_270", "name": "Oignon rouge (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_grill√©_271", "name": "Oignon rouge (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_saut√©_272", "name": "Oignon rouge (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_en_conserve_273", "name": "Oignon rouge (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "oignon_rouge_surgel√©_274", "name": "Oignon rouge (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_cru_275", "name": "√âchalote (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_cuit_276", "name": "√âchalote (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_vapeur_277", "name": "√âchalote (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_r√¥ti_278", "name": "√âchalote (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_grill√©_279", "name": "√âchalote (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_saut√©_280", "name": "√âchalote (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_en_conserve_281", "name": "√âchalote (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©chalote_surgel√©_282", "name": "√âchalote (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_cru_283", "name": "Ail (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_cuit_284", "name": "Ail (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_vapeur_285", "name": "Ail (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_r√¥ti_286", "name": "Ail (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_grill√©_287", "name": "Ail (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_saut√©_288", "name": "Ail (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_en_conserve_289", "name": "Ail (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ail_surgel√©_290", "name": "Ail (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_cru_291", "name": "Brocoli (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_cuit_292", "name": "Brocoli (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_vapeur_293", "name": "Brocoli (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_r√¥ti_294", "name": "Brocoli (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_grill√©_295", "name": "Brocoli (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_saut√©_296", "name": "Brocoli (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_en_conserve_297", "name": "Brocoli (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "brocoli_surgel√©_298", "name": "Brocoli (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_cru_299", "name": "Chou-fleur (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_cuit_300", "name": "Chou-fleur (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_vapeur_301", "name": "Chou-fleur (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_r√¥ti_302", "name": "Chou-fleur (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_grill√©_303", "name": "Chou-fleur (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_saut√©_304", "name": "Chou-fleur (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_en_conserve_305", "name": "Chou-fleur (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_fleur_surgel√©_306", "name": "Chou-fleur (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_cru_307", "name": "Chou (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_cuit_308", "name": "Chou (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_vapeur_309", "name": "Chou (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_r√¥ti_310", "name": "Chou (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_grill√©_311", "name": "Chou (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_saut√©_312", "name": "Chou (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_en_conserve_313", "name": "Chou (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_surgel√©_314", "name": "Chou (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_cru_315", "name": "Chou rouge (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_cuit_316", "name": "Chou rouge (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_vapeur_317", "name": "Chou rouge (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_r√¥ti_318", "name": "Chou rouge (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_grill√©_319", "name": "Chou rouge (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_saut√©_320", "name": "Chou rouge (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_en_conserve_321", "name": "Chou rouge (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_rouge_surgel√©_322", "name": "Chou rouge (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_cru_323", "name": "Chou kale (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_cuit_324", "name": "Chou kale (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_vapeur_325", "name": "Chou kale (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_r√¥ti_326", "name": "Chou kale (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_grill√©_327", "name": "Chou kale (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_saut√©_328", "name": "Chou kale (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_en_conserve_329", "name": "Chou kale (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_kale_surgel√©_330", "name": "Chou kale (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_cru_331", "name": "Chou de Bruxelles (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_cuit_332", "name": "Chou de Bruxelles (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_vapeur_333", "name": "Chou de Bruxelles (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_r√¥ti_334", "name": "Chou de Bruxelles (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_grill√©_335", "name": "Chou de Bruxelles (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_saut√©_336", "name": "Chou de Bruxelles (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_en_conserve_337", "name": "Chou de Bruxelles (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "chou_de_bruxelles_surgel√©_338", "name": "Chou de Bruxelles (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_cru_339", "name": "√âpinards (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_cuit_340", "name": "√âpinards (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_vapeur_341", "name": "√âpinards (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_r√¥ti_342", "name": "√âpinards (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_grill√©_343", "name": "√âpinards (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_saut√©_344", "name": "√âpinards (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_en_conserve_345", "name": "√âpinards (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "√©pinards_surgel√©_346", "name": "√âpinards (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_cru_347", "name": "Roquette (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_cuit_348", "name": "Roquette (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_vapeur_349", "name": "Roquette (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_r√¥ti_350", "name": "Roquette (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_grill√©_351", "name": "Roquette (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_saut√©_352", "name": "Roquette (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_en_conserve_353", "name": "Roquette (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "roquette_surgel√©_354", "name": "Roquette (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_cru_355", "name": "Salade (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_cuit_356", "name": "Salade (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_vapeur_357", "name": "Salade (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_r√¥ti_358", "name": "Salade (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_grill√©_359", "name": "Salade (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_saut√©_360", "name": "Salade (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_en_conserve_361", "name": "Salade (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "salade_surgel√©_362", "name": "Salade (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_cru_363", "name": "M√¢che (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_cuit_364", "name": "M√¢che (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_vapeur_365", "name": "M√¢che (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_r√¥ti_366", "name": "M√¢che (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_grill√©_367", "name": "M√¢che (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_saut√©_368", "name": "M√¢che (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_en_conserve_369", "name": "M√¢che (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "m√¢che_surgel√©_370", "name": "M√¢che (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_cru_371", "name": "Champignons (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_cuit_372", "name": "Champignons (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_vapeur_373", "name": "Champignons (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_r√¥ti_374", "name": "Champignons (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_grill√©_375", "name": "Champignons (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_saut√©_376", "name": "Champignons (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_en_conserve_377", "name": "Champignons (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "champignons_surgel√©_378", "name": "Champignons (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_cru_379", "name": "Haricots verts (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_cuit_380", "name": "Haricots verts (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_vapeur_381", "name": "Haricots verts (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_r√¥ti_382", "name": "Haricots verts (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_grill√©_383", "name": "Haricots verts (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_saut√©_384", "name": "Haricots verts (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_en_conserve_385", "name": "Haricots verts (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "haricots_verts_surgel√©_386", "name": "Haricots verts (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_cru_387", "name": "Asperges (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_cuit_388", "name": "Asperges (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_vapeur_389", "name": "Asperges (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_r√¥ti_390", "name": "Asperges (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_grill√©_391", "name": "Asperges (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_saut√©_392", "name": "Asperges (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_en_conserve_393", "name": "Asperges (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "asperges_surgel√©_394", "name": "Asperges (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_cru_395", "name": "Poireau (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_cuit_396", "name": "Poireau (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_vapeur_397", "name": "Poireau (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_r√¥ti_398", "name": "Poireau (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_grill√©_399", "name": "Poireau (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_saut√©_400", "name": "Poireau (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_en_conserve_401", "name": "Poireau (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "poireau_surgel√©_402", "name": "Poireau (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_cru_403", "name": "Courge butternut (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_cuit_404", "name": "Courge butternut (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_vapeur_405", "name": "Courge butternut (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_r√¥ti_406", "name": "Courge butternut (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_grill√©_407", "name": "Courge butternut (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_saut√©_408", "name": "Courge butternut (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_en_conserve_409", "name": "Courge butternut (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "courge_butternut_surgel√©_410", "name": "Courge butternut (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_cru_411", "name": "Potiron (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_cuit_412", "name": "Potiron (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_vapeur_413", "name": "Potiron (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_r√¥ti_414", "name": "Potiron (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_grill√©_415", "name": "Potiron (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_saut√©_416", "name": "Potiron (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_en_conserve_417", "name": "Potiron (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "potiron_surgel√©_418", "name": "Potiron (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_cru_419", "name": "Citrouille (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_cuit_420", "name": "Citrouille (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_vapeur_421", "name": "Citrouille (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_r√¥ti_422", "name": "Citrouille (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_grill√©_423", "name": "Citrouille (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_saut√©_424", "name": "Citrouille (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_en_conserve_425", "name": "Citrouille (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "citrouille_surgel√©_426", "name": "Citrouille (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_cru_427", "name": "Ma√Øs (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_cuit_428", "name": "Ma√Øs (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_vapeur_429", "name": "Ma√Øs (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_r√¥ti_430", "name": "Ma√Øs (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_grill√©_431", "name": "Ma√Øs (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_saut√©_432", "name": "Ma√Øs (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_en_conserve_433", "name": "Ma√Øs (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "ma√Øs_surgel√©_434", "name": "Ma√Øs (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_cru_435", "name": "Artichaut (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_cuit_436", "name": "Artichaut (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_vapeur_437", "name": "Artichaut (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_r√¥ti_438", "name": "Artichaut (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_grill√©_439", "name": "Artichaut (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_saut√©_440", "name": "Artichaut (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_en_conserve_441", "name": "Artichaut (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "artichaut_surgel√©_442", "name": "Artichaut (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_cru_443", "name": "Endive (cru)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_cuit_444", "name": "Endive (cuit)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_vapeur_445", "name": "Endive (vapeur)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_r√¥ti_446", "name": "Endive (r√¥ti)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_grill√©_447", "name": "Endive (grill√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_saut√©_448", "name": "Endive (saut√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_en_conserve_449", "name": "Endive (en conserve)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "endive_surgel√©_450", "name": "Endive (surgel√©)", "kcal": 28.0, "p": 1.8, "c": 5.5, "f": 0.3}, {"id": "banane_surgel√©_451", "name": "Banane (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "banane_compote_452", "name": "Banane (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "pomme_surgel√©_453", "name": "Pomme (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "pomme_compote_454", "name": "Pomme (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "poire_455", "name": "Poire", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "poire_surgel√©_456", "name": "Poire (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "poire_compote_457", "name": "Poire (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "fraise_surgel√©_458", "name": "Fraise (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "fraise_compote_459", "name": "Fraise (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "framboise_460", "name": "Framboise", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "framboise_surgel√©_461", "name": "Framboise (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "framboise_compote_462", "name": "Framboise (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "myrtille_463", "name": "Myrtille", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "myrtille_surgel√©_464", "name": "Myrtille (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "myrtille_compote_465", "name": "Myrtille (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "mangue_466", "name": "Mangue", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "mangue_surgel√©_467", "name": "Mangue (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "mangue_compote_468", "name": "Mangue (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "ananas_469", "name": "Ananas", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "ananas_surgel√©_470", "name": "Ananas (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "ananas_compote_471", "name": "Ananas (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "orange_472", "name": "Orange", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "orange_surgel√©_473", "name": "Orange (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "orange_compote_474", "name": "Orange (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "cl√©mentine_475", "name": "Cl√©mentine", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "cl√©mentine_surgel√©_476", "name": "Cl√©mentine (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "cl√©mentine_compote_477", "name": "Cl√©mentine (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "citron_478", "name": "Citron", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "citron_surgel√©_479", "name": "Citron (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "citron_compote_480", "name": "Citron (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "pamplemousse_481", "name": "Pamplemousse", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "pamplemousse_surgel√©_482", "name": "Pamplemousse (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "pamplemousse_compote_483", "name": "Pamplemousse (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "kiwi_484", "name": "Kiwi", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "kiwi_surgel√©_485", "name": "Kiwi (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "kiwi_compote_486", "name": "Kiwi (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "raisin_487", "name": "Raisin", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "raisin_surgel√©_488", "name": "Raisin (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "raisin_compote_489", "name": "Raisin (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "past√®que_490", "name": "Past√®que", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "past√®que_surgel√©_491", "name": "Past√®que (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "past√®que_compote_492", "name": "Past√®que (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "melon_493", "name": "Melon", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "melon_surgel√©_494", "name": "Melon (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "melon_compote_495", "name": "Melon (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "p√™che_496", "name": "P√™che", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "p√™che_surgel√©_497", "name": "P√™che (surgel√©)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "p√™che_compote_498", "name": "P√™che (compote)", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}, {"id": "nectarine_499", "name": "Nectarine", "kcal": 60.0, "p": 0.8, "c": 14.5, "f": 0.3}];

const $=(s)=>document.querySelector(s);
function uid(){return Math.random().toString(16).slice(2)+Date.now().toString(16);}
function escapeHtml(s){return (s||"").toString().replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");}
function normalize(s){return (s||"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim();}
function fmt1(n){n=Number(n||0);return (Math.round(n*10)/10).toString();}
function showToast(msg){const t=$("#toast");t.textContent=msg;t.style.display="block";clearTimeout(showToast._t);showToast._t=setTimeout(()=>t.style.display="none",1700);}

function loadFoods(){try{const raw=localStorage.getItem(FOODS_KEY);if(!raw){localStorage.setItem(FOODS_KEY,JSON.stringify(DEFAULT_FOODS));return DEFAULT_FOODS.slice();}const arr=JSON.parse(raw);return Array.isArray(arr)?arr:DEFAULT_FOODS.slice();}catch(e){return DEFAULT_FOODS.slice();}}
let foods=loadFoods();
function saveFoods(){localStorage.setItem(FOODS_KEY,JSON.stringify(foods));}
function foodById(id){return foods.find(f=>f.id===id)||null;}
function foodName(id){const f=foodById(id);return f?f.name:"";}

function seedRecipes(){const chicken=foods.find(x=>normalize(x.name).includes("poulet"))?.id||foods[0].id;
const rice=foods.find(x=>normalize(x.name).includes("riz basmati (cru)"))?.id||foods[0].id;
const spin=foods.find(x=>normalize(x.name).includes("epinards"))?.id||foods[0].id;
return [{id:uid(),name:"Bowl poulet curry",mainCat:"Healthy",subCat:"Plat",difficulty:"Facile",timeMin:20,servings:1,kcal:0,p:0,c:0,f:0,autoMacros:true,photo:null,
ingredients:[{foodId:chicken,grams:150,label:"Poulet",note:""},{foodId:rice,grams:70,label:"Riz basmati",note:""},{foodId:spin,grams:100,label:"√âpinards",note:""}],
steps:"1) Cuire le riz.\n2) Cuire le poulet.\n3) M√©langer et servir.",notes:"",createdAt:Date.now()-1000*60*60*12,updatedAt:Date.now()-1000*60*60*12}];}

function loadState(){try{const raw=localStorage.getItem(STORAGE_KEY);if(!raw)return{recipes:seedRecipes()};const obj=JSON.parse(raw);if(!obj.recipes)obj.recipes=[];return obj;}catch(e){return{recipes:seedRecipes()};}}
let state=loadState();
function saveState(){localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}
function migrate(r){if(!r.mainCat)r.mainCat=MAIN_CATS.includes(r.category)?r.category:"Healthy";if(!r.subCat)r.subCat=SUB_CATS.includes(r.subcategory)?r.subcategory:"Plat";if(r.autoMacros===undefined)r.autoMacros=true;return r;}
state.recipes=(state.recipes||[]).map(migrate);saveState();

function calcTotals(ings){let kcal=0,p=0,c=0,f=0;for(const it of (ings||[])){const grams=Number(it.grams||0);if(!grams||grams<=0)continue;const food=foodById(it.foodId);if(!food)continue;const m=grams/100;kcal+=(Number(food.kcal)||0)*m;p+=(Number(food.p)||0)*m;c+=(Number(food.c)||0)*m;f+=(Number(food.f)||0)*m;}return{kcal,p,c,f};}
function ensureAuto(){for(const r of state.recipes){if(r.autoMacros){const t=calcTotals(r.ingredients||[]);r.kcal=Math.round(t.kcal);r.p=Math.round(t.p*10)/10;r.c=Math.round(t.c*10)/10;r.f=Math.round(t.f*10)/10;}}saveState();}ensureAuto();

function levenshtein(a,b){a=a||"";b=b||"";const m=a.length,n=b.length;if(!m)return n;if(!n)return m;const dp=new Array(n+1);for(let j=0;j<=n;j++)dp[j]=j;for(let i=1;i<=m;i++){let prev=dp[0];dp[0]=i;for(let j=1;j<=n;j++){const tmp=dp[j];const cost=a[i-1]===b[j-1]?0:1;dp[j]=Math.min(dp[j]+1,dp[j-1]+1,prev+cost);prev=tmp;}}return dp[n];}
function scoreName(query,name){const q=normalize(query),t=normalize(name);if(!q||!t)return-999;let score=0;if(t.includes(q))score+=80;const qT=q.split(" ").filter(Boolean),tT=t.split(" ").filter(Boolean);for(const qt of qT){if(tT.includes(qt)){score+=35;continue;}let best=999;for(const tt of tT){const d=levenshtein(qt,tt);if(d<best)best=d;if(best===0)break;}if(best===1)score+=18;else if(best===2)score+=10;else if(best===3&&qt.length>=6)score+=6;else score-=4;}return score;}
function bestFoodMatches(name,topN=4){return foods.map(f=>({f,s:scoreName(name,f.name)})).sort((a,b)=>b.s-a.s).filter(x=>x.s>10).slice(0,topN);}
function chooseAmbiguous(matches,original){const opts=matches.map((x,i)=>`${i+1}) ${x.f.name}`).join("\n");const choice=prompt(`Je ne suis pas s√ªr pour: "${original}".\nChoisis :\n${opts}\n\nTape 1-${matches.length} (ou annule)`);const idx=parseInt(choice||"",10);if(!idx||idx<1||idx>matches.length)return null;return matches[idx-1].f;}

function parseIngredientLine(line){const raw=line.trim();if(!raw)return null;const s=raw.replace(/^[-‚Ä¢*\u2022\s]+/,"").trim();
let m=s.match(/^([0-9]+)\s*(oeuf|oeufs)\b/i);if(m){const n=parseInt(m[1]||"1",10);return{name:"Oeuf entier",grams:60*n,raw};}
m=s.match(/^([0-9]+)\s*(yaourt|yahourt)\b/i);if(m){const n=parseInt(m[1]||"1",10);return{name:"Yaourt nature",grams:125*n,raw};}
m=s.match(/^([0-9]+)\s*(c\.\s*a\.\s*s|cas|cuillere\s*a\s*soupe|cuill√®re\s*√†\s*soupe)\s*(.*)$/i);if(m){const n=parseInt(m[1]||"1",10);const name=(m[3]||"").trim()||"Huile d'olive";const grams=name.toLowerCase().includes("huile")?10*n:15*n;return{name,grams,raw};}
m=s.match(/^([0-9]+)\s*(c\.\s*a\.\s*c|cac|cuillere\s*a\s*cafe|cuill√®re\s*√†\s*caf√©)\s*(.*)$/i);if(m){const n=parseInt(m[1]||"1",10);const name=(m[3]||"").trim()||"Sucre";const grams=5*n;return{name,grams,raw};}
m=s.match(/^([0-9]+(?:[\.,][0-9]+)?)\s*(kg|g|gr|grammes|grams|ml|cl|l)\b\s*(.*)$/i);if(m){const num=parseFloat(m[1].replace(",","."));const unit=m[2].toLowerCase();const name=(m[3]||"").trim();let grams=num;if(unit==="kg")grams=num*1000;else if(unit==="l")grams=num*1000;else if(unit==="cl")grams=num*10;else grams=num;return{name,grams:Math.round(grams*10)/10,raw};}
return{name:s,grams:null,raw};}

function parseImportText(text){const t=(text||"").replace(/\r/g,"").trim();if(!t)return null;
const nameMatch=t.match(/(?:^|\n)\s*(?:nom|title)\s*:\s*(.+)\s*(?:\n|$)/i);const name=nameMatch?nameMatch[1].trim():"Recette import√©e";
const ingBlockMatch=t.match(/(?:^|\n)\s*(?:ingredients|ingr[e√©]dients)\s*:\s*([\s\S]*?)(?:\n\s*(?:instructions|preparation|pr√©paration|etapes|√©tapes)\s*:|$)/i);
const instrMatch=t.match(/(?:^|\n)\s*(?:instructions|preparation|pr√©paration|etapes|√©tapes)\s*:\s*([\s\S]*)$/i);
const ingBlock=ingBlockMatch?ingBlockMatch[1].trim():"";const instructions=instrMatch?instrMatch[1].trim():"";
const lines=ingBlock.split("\n").map(x=>x.trim()).filter(Boolean);const parsed=lines.map(parseIngredientLine).filter(Boolean);
const ingredients=[];const unknown=[];
for(const it of parsed){const nm=(it.name||"").trim();if(!nm){unknown.push(it.raw);continue;}
const matches=bestFoodMatches(nm,4);if(!matches.length){unknown.push(it.raw);continue;}
let chosen=matches[0].f;
if(matches.length>1 && (matches[0].s-matches[1].s)<8){const pick=chooseAmbiguous(matches,it.raw);if(pick)chosen=pick;else{unknown.push(it.raw);continue;}}
let grams=it.grams;let note="";
if(grams==null){grams=100;note="Quantit√© non trouv√©e ‚Üí 100g (√† ajuster)";unknown.push(it.raw+" (quantit√© manquante)");}
ingredients.push({foodId:chosen.id,grams,label:nm,note});
}
return{name,ingredients,instructions,unknown};}

function pill(text,cls=""){return `<span class="pill ${cls}">${escapeHtml(text)}</span>`;}
function recipeSearchText(r){const ing=(r.ingredients||[]).map(i=>`${i.label||""} ${foodName(i.foodId)} ${i.grams||""}`).join(" ");return `${r.name} ${r.mainCat} ${r.subCat} ${r.difficulty} ${ing} ${r.steps||""} ${r.notes||""}`; }
function recipeCardHTML(r){const top=r.photo?`<div class="thumb"><img src="${r.photo}" alt="${escapeHtml(r.name)}"></div>`:`<div class="thumb">${escapeHtml(r.mainCat||"Recette")}</div>`;
const meta=[pill(r.mainCat||"‚Äî","accent"),pill(r.subCat||"‚Äî"),pill(`‚è± ${r.timeMin||0} min`),pill(`‚≠ê ${r.difficulty||"‚Äî"}`,"warn"),pill(`üî• ${Math.round(r.kcal||0)} kcal`),pill(`üí™ ${fmt1(r.p||0)} g P`,"ok")].join("");
return `<div class="rcard" data-id="${r.id}">${top}<div class="body"><h3 class="name">${escapeHtml(r.name||"Sans titre")}</h3><div class="meta">${escapeHtml((r.notes||"").slice(0,92))}${(r.notes||"").length>92?"‚Ä¶":""}</div><div class="row2">${meta}</div></div></div>`;}

function renderSelectors(){$("#mainCat").innerHTML=`<option value="">Toutes</option>`+MAIN_CATS.map(c=>`<option value="${escapeHtml(c)}">${escapeHtml(c)}</option>`).join("");
$("#subCat").innerHTML=`<option value="">Toutes</option>`+SUB_CATS.map(c=>`<option value="${escapeHtml(c)}">${escapeHtml(c)}</option>`).join("");
$("#f_mainCat").innerHTML=MAIN_CATS.map(c=>`<option value="${escapeHtml(c)}">${escapeHtml(c)}</option>`).join("");
$("#f_subCat").innerHTML=SUB_CATS.map(c=>`<option value="${escapeHtml(c)}">${escapeHtml(c)}</option>`).join("");}

function renderStatsHome(){const total=state.recipes.length;const avgK=total?state.recipes.reduce((s,r)=>s+(Number(r.kcal)||0),0)/total:0;const avgP=total?state.recipes.reduce((s,r)=>s+(Number(r.p)||0),0)/total:0;
$("#statsHome").innerHTML=[`<span class="chip" style="cursor:default">üìö ${total} recettes</span>`,`<span class="chip" style="cursor:default">üî• ${Math.round(avgK)} kcal (moy.)</span>`,`<span class="chip" style="cursor:default">üí™ ${Math.round(avgP)} g prot (moy.)</span>`,`<span class="chip" style="cursor:default">ü•ó ${foods.length} aliments</span>`].join("");}

let homeMainSelected=null;
function renderHome(){renderStatsHome();
const main=$("#homeMain");
main.innerHTML=MAIN_CATS.map(c=>`<span class="chip ${homeMainSelected===c?"active":""}" data-main="${escapeHtml(c)}">${escapeHtml(c)}</span>`).join("");
main.querySelectorAll("[data-main]").forEach(el=>el.addEventListener("click",()=>{
  const c=el.dataset.main;
  homeMainSelected = (homeMainSelected===c)? null : c;
  renderHome();
}));
$("#subHint").textContent = homeMainSelected ? `‚Ä¢ pour ${homeMainSelected}` : "‚Ä¢ s√©lectionne une cat√©gorie";
const sub=$("#homeSub");
sub.innerHTML = SUB_CATS.map(sc=>`<span class="chip" data-sub="${escapeHtml(sc)}" style="${homeMainSelected? "":"opacity:.45; pointer-events:none;"}">${escapeHtml(sc)}</span>`).join("");
sub.querySelectorAll("[data-sub]").forEach(el=>el.addEventListener("click",()=>{
  if(!homeMainSelected) return;
  setView("recipes");
  $("#mainCat").value = homeMainSelected;
  $("#subCat").value = el.dataset.sub;
  renderQuickSubs();
  renderRecipes();
}));
}

function applyRecipeFilters(){const q=($("#q").value||"").trim();const mainCat=$("#mainCat").value||"";const subCat=$("#subCat").value||"";const diff=$("#diff").value||"";const sort=$("#sort").value||"recent";
let list=state.recipes.slice();if(mainCat)list=list.filter(r=>r.mainCat===mainCat);if(subCat)list=list.filter(r=>r.subCat===subCat);if(diff)list=list.filter(r=>r.difficulty===diff);
if(q){list=list.map(r=>({r,score:scoreName(q,r.name)*1.5+scoreName(q,recipeSearchText(r))})).filter(x=>x.score>5).sort((a,b)=>b.score-a.score).map(x=>x.r);}
const cmp=(a,b)=>(Number(a)||0)-(Number(b)||0);
if(sort==="recent")list.sort((a,b)=>(b.updatedAt||0)-(a.updatedAt||0));
if(sort==="name")list.sort((a,b)=>(a.name||"").localeCompare(b.name||"","fr"));
if(sort==="kcal")list.sort((a,b)=>cmp(a.kcal,b.kcal));
if(sort==="protein")list.sort((a,b)=>cmp(b.p,a.p));
if(sort==="time")list.sort((a,b)=>cmp(a.timeMin,b.timeMin));
return list;}

function renderRecipes(){const list=applyRecipeFilters();const total=list.length;const avgK=total?list.reduce((s,r)=>s+(Number(r.kcal)||0),0)/total:0;const avgP=total?list.reduce((s,r)=>s+(Number(r.p)||0),0)/total:0;
$("#statsRecipes").innerHTML=[`<span class="chip" style="cursor:default">üìö ${total} r√©sultat(s)</span>`,`<span class="chip" style="cursor:default">üî• ${Math.round(avgK)} kcal (moy.)</span>`,`<span class="chip" style="cursor:default">üí™ ${Math.round(avgP)} g prot (moy.)</span>`].join("");
$("#grid").innerHTML=list.map(recipeCardHTML).join("")||`<div class="mini">Aucun r√©sultat.</div>`;
$("#grid").querySelectorAll(".rcard").forEach(el=>el.addEventListener("click",()=>openRecipe(el.dataset.id)));
}

function setView(view){document.querySelectorAll(".tab").forEach(t=>t.classList.toggle("active",t.dataset.view===view));
$("#viewHome").style.display=view==="home"?"block":"none";
$("#viewRecipes").style.display=view==="recipes"?"block":"none";
if(view==="home") renderHome(); else { renderQuickSubs(); renderRecipes(); }
}

function renderQuickSubs(){const container=$("#quickSubs");const active=$("#subCat").value||"";
container.innerHTML = SUB_CATS.map(sc=>`<span class="chip ${active===sc?"active":""}" data-sub="${escapeHtml(sc)}">${escapeHtml(sc)}</span>`).join("");
container.querySelectorAll("[data-sub]").forEach(el=>el.addEventListener("click",()=>{
  $("#subCat").value = ( $("#subCat").value===el.dataset.sub ? "" : el.dataset.sub );
  renderRecipes(); renderQuickSubs();
}));
}

// View recipe
let currentId=null, editId=null, formPhoto=null;
function openRecipe(id){const r=state.recipes.find(x=>x.id===id);if(!r)return;currentId=id;$("#viewTitle").textContent=r.name||"Recette";
const img=r.photo?`<div class="img"><img src="${r.photo}"></div>`:`<div class="img"><span>Pas de photo</span></div>`;
const ingRows=(r.ingredients||[]).map(i=>{const f=foodById(i.foodId);const nm=i.label||(f?f.name:"‚Äî");
return `<tr><td><strong>${escapeHtml(nm)}</strong><div class="mini">${f?escapeHtml(f.name):"Aliment manquant"}</div></td><td>${escapeHtml(i.grams??"")}</td><td>${escapeHtml(i.note||"")}</td></tr>`;}).join("");
$("#viewBody").innerHTML=`<div class="two">
  <div>
    ${img}
    <div class="row2" style="margin-top:10px">
      ${pill(r.mainCat,"accent")} ${pill(r.subCat)} ${pill("‚≠ê "+r.difficulty,"warn")}
      ${pill("‚è± "+(r.timeMin||0)+" min")} ${pill("üçΩ "+(r.servings||1))}
    </div>
    <div class="row2" style="margin-top:10px">
      ${pill("üî• "+Math.round(r.kcal||0)+" kcal")} ${pill("üí™ "+fmt1(r.p||0)+" g P","ok")}
      ${pill("üçö "+fmt1(r.c||0)+" g G")} ${pill("ü•ë "+fmt1(r.f||0)+" g L")}
    </div>
    ${r.notes?`<div class="div"></div><div class="mini"><strong>Notes</strong><br>${escapeHtml(r.notes).replaceAll("\n","<br>")}</div>`:""}
  </div>
  <div>
    <div class="mini"><strong>Ingr√©dients</strong></div>
    <div style="margin-top:10px; overflow:auto">
      <table><thead><tr><th>Ingr√©dient</th><th>g</th><th>Note</th></tr></thead><tbody>
        ${ingRows||`<tr><td colspan="3" class="mini">Aucun ingr√©dient</td></tr>`}
      </tbody></table>
    </div>
    <div class="div"></div>
    <div class="mini"><strong>Instructions</strong></div>
    <div class="mini" style="line-height:1.65; margin-top:8px">${escapeHtml(r.steps||"").replaceAll("\n","<br>")||"‚Äî"}</div>
  </div>
</div>`;
$("#overlayView").style.display="flex";
}
function closeView(){$("#overlayView").style.display="none"; currentId=null;}

// Edit mode
function isEditOn(){return localStorage.getItem("edit_mode")==="on";}
function setEditOn(on){localStorage.setItem("edit_mode",on?"on":"off");
document.querySelectorAll(".adminOnly").forEach(el=>el.style.display=on?"":"none");
$("#btnToggleEdit").textContent=on?"üîì √âdition active":"üîí Mode √©dition";}
setEditOn(isEditOn());

// Form helpers
function renderFoodOptions(sel,selectedId){const opts=foods.slice().sort((a,b)=>a.name.localeCompare(b.name,"fr"))
.map(f=>`<option value="${escapeHtml(f.id)}" ${f.id===selectedId?"selected":""}>${escapeHtml(f.name)}</option>`).join("");
sel.innerHTML=`<option value="">‚Äî Choisir ‚Äî</option>`+opts;}
function renderFormPhoto(){$("#formImgBox").innerHTML=formPhoto?`<img src="${formPhoto}">`:`<span>Photo</span>`;}
function updateMacroInputsLock(){const auto=$("#autoMacros").checked;["f_kcal","f_p","f_c","f_f"].forEach(id=>$("#"+id).disabled=auto);}
function addIngRow(ing={foodId:"",grams:"",label:"",note:""}){const tr=document.createElement("tr");
tr.innerHTML=`<td><select class="foodSel"></select></td><td><input class="grams" type="number" min="0" step="1" value="${escapeHtml(ing.grams)}"></td>
<td><input class="label" type="text" value="${escapeHtml(ing.label)}"></td><td><input class="note" type="text" value="${escapeHtml(ing.note)}"></td>
<td><button class="btn danger" type="button">‚Äî</button></td>`;
const sel=tr.querySelector(".foodSel");renderFoodOptions(sel,ing.foodId||"");sel.addEventListener("change",recalcFormMacros);
tr.querySelector(".grams").addEventListener("input",recalcFormMacros);
tr.querySelector("button").addEventListener("click",()=>{tr.remove(); recalcFormMacros();});
$("#ingBody").appendChild(tr); recalcFormMacros();
}
function collectIngredients(){return [...$("#ingBody").querySelectorAll("tr")].map(tr=>{const foodId=tr.querySelector(".foodSel").value;
const grams=Number(tr.querySelector(".grams").value||0); const label=tr.querySelector(".label").value.trim(); const note=tr.querySelector(".note").value.trim();
return{foodId,grams,label,note};}).filter(i=>i.foodId&&i.grams>0);}
function recalcFormMacros(){if(!$("#autoMacros").checked)return;const t=calcTotals(collectIngredients());
$("#f_kcal").value=Math.round(t.kcal);$("#f_p").value=fmt1(t.p);$("#f_c").value=fmt1(t.c);$("#f_f").value=fmt1(t.f);}
function resetForm(){editId=null;formPhoto=null;$("#photo").value="";$("#autoMacros").checked=true;
$("#f_name").value="";$("#f_mainCat").value=MAIN_CATS[0];$("#f_subCat").value="Plat";$("#f_diff").value="Facile";$("#f_time").value="";$("#f_serv").value="1";
$("#f_notes").value="";$("#f_steps").value="";["f_kcal","f_p","f_c","f_f"].forEach(id=>$("#"+id).value="");
$("#ingBody").innerHTML="";addIngRow();addIngRow();updateMacroInputsLock();renderFormPhoto();recalcFormMacros();}
function openFormNew(){$("#formTitle").textContent="Nouvelle recette"; resetForm(); $("#overlayForm").style.display="flex";}
function openFormEdit(id){const r=state.recipes.find(x=>x.id===id); if(!r) return; if(!confirm("Modifier cette recette ?")) return;
editId=id; formPhoto=r.photo||null; $("#formTitle").textContent="Modifier";
$("#autoMacros").checked=(r.autoMacros!==false);
$("#f_name").value=r.name||""; $("#f_mainCat").value=r.mainCat||MAIN_CATS[0]; $("#f_subCat").value=r.subCat||"Plat";
$("#f_diff").value=r.difficulty||"Facile"; $("#f_time").value=r.timeMin||0; $("#f_serv").value=r.servings||1;
$("#f_kcal").value=r.kcal||0; $("#f_p").value=r.p||0; $("#f_c").value=r.c||0; $("#f_f").value=r.f||0;
$("#f_notes").value=r.notes||""; $("#f_steps").value=r.steps||"";
$("#ingBody").innerHTML=""; (r.ingredients||[]).forEach(i=>addIngRow(i)); if(!(r.ingredients||[]).length) addIngRow();
updateMacroInputsLock(); renderFormPhoto(); recalcFormMacros(); $("#overlayForm").style.display="flex";
}
function closeForm(){$("#overlayForm").style.display="none";}
function saveRecipe(){const name=$("#f_name").value.trim(); if(!name){alert("Titre manquant."); return;}
const auto=$("#autoMacros").checked; const ingredients=collectIngredients();
let kcal=Number($("#f_kcal").value||0),p=Number($("#f_p").value||0),c=Number($("#f_c").value||0),f=Number($("#f_f").value||0);
if(auto){const t=calcTotals(ingredients);kcal=Math.round(t.kcal);p=Math.round(t.p*10)/10;c=Math.round(t.c*10)/10;f=Math.round(t.f*10)/10;}
const obj={id:editId||uid(),name,mainCat:$("#f_mainCat").value,subCat:$("#f_subCat").value,difficulty:$("#f_diff").value,
timeMin:Number($("#f_time").value||0),servings:Number($("#f_serv").value||1),kcal,p,c,f,autoMacros:auto,photo:formPhoto,
ingredients,steps:$("#f_steps").value.trim(),notes:$("#f_notes").value.trim(),updatedAt:Date.now(),createdAt:Date.now()};
if(editId){const idx=state.recipes.findIndex(r=>r.id===editId); if(idx>=0){obj.createdAt=state.recipes[idx].createdAt||obj.createdAt; state.recipes[idx]=obj;}
showToast("Modifi√©e");} else {state.recipes.unshift(obj); showToast("Ajout√©e");}
saveState(); closeForm(); setView("recipes"); renderRecipes(); openRecipe(obj.id);
}
function deleteCurrent(){if(!currentId) return; const r=state.recipes.find(x=>x.id===currentId); if(!r) return;
if(!confirm(`Supprimer "${r.name}" ?`)) return;
state.recipes=state.recipes.filter(x=>x.id!==currentId);
saveState(); closeView(); renderHome(); renderRecipes(); showToast("Supprim√©e");
}

// Import
let lastUnknown=[];
function openImport(){$("#importText").value=""; $("#importUnknown").textContent="‚Äî"; lastUnknown=[]; $("#overlayImport").style.display="flex";}
function closeImport(){$("#overlayImport").style.display="none";}
function previewImport(){const res=parseImportText($("#importText").value); if(!res){$("#importUnknown").textContent="‚Äî"; lastUnknown=[]; return;}
lastUnknown=res.unknown||[]; $("#importUnknown").textContent = lastUnknown.length ? lastUnknown.join(" | ") : "Tout est reconnu ‚úÖ";
}
function doImport(){const res=parseImportText($("#importText").value); if(!res){alert("Colle une recette."); return;}
const obj={id:uid(),name:res.name||"Recette import√©e",mainCat:"Healthy",subCat:"Plat",difficulty:"Facile",timeMin:0,servings:1,kcal:0,p:0,c:0,f:0,autoMacros:true,photo:null,
ingredients:res.ingredients||[],steps:res.instructions||"",notes:lastUnknown.length?("‚ö†Ô∏è √Ä v√©rifier : "+lastUnknown.join(" | ")):"",updatedAt:Date.now(),createdAt:Date.now()};
const t=calcTotals(obj.ingredients); obj.kcal=Math.round(t.kcal); obj.p=Math.round(t.p*10)/10; obj.c=Math.round(t.c*10)/10; obj.f=Math.round(t.f*10)/10;
state.recipes.unshift(obj); saveState(); closeImport(); setView("recipes"); renderRecipes(); openRecipe(obj.id); showToast("Import ‚úÖ");
}

// Foods modal
function openFoods(){renderFoods(); $("#overlayFoods").style.display="flex";}
function closeFoods(){$("#overlayFoods").style.display="none";}
function renderFoods(){const sorted=foods.slice().sort((a,b)=>a.name.localeCompare(b.name,"fr"));
const rows=sorted.map(f=>`<tr><td><strong>${escapeHtml(f.name)}</strong></td><td>${f.kcal}</td><td>${f.p}</td><td>${f.c}</td><td>${f.f}</td></tr>`).join("");
$("#foodsBody").innerHTML = `<div class="mini">Base: <strong>${foods.length}</strong> aliments (par 100g). Ajouter: bouton +.</div>
<div style="margin-top:10px; overflow:auto"><table><thead><tr><th>Aliment</th><th>kcal</th><th>P</th><th>G</th><th>L</th></tr></thead><tbody>${rows}</tbody></table></div>`;
}
function addFood(){const name=prompt("Nom de l‚Äôaliment :"); if(!name) return;
const kcal=Number(prompt("kcal / 100g :", "0")||0);
const p=Number(prompt("P / 100g :", "0")||0);
const c=Number(prompt("G / 100g :", "0")||0);
const f=Number(prompt("L / 100g :", "0")||0);
const id=normalize(name).replaceAll(" ","_").slice(0,30)+"_"+Math.random().toString(16).slice(2,6);
foods.push({id,name,kcal,p,c,f}); saveFoods(); renderFoods(); showToast("Aliment ajout√©");
}

// Wiring
document.querySelectorAll(".tab").forEach(t=>t.addEventListener("click",()=>setView(t.dataset.view)));
$("#btnCloseView").addEventListener("click",closeView);
$("#overlayView").addEventListener("click",(e)=>{if(e.target.id==="overlayView") closeView();});

$("#btnToggleEdit").addEventListener("click",()=>{$("#overlayPin").style.display="flex"; $("#pinInput").value="";});
$("#btnClosePin").addEventListener("click",()=>{$("#overlayPin").style.display="none";});
$("#overlayPin").addEventListener("click",(e)=>{if(e.target.id==="overlayPin") $("#overlayPin").style.display="none";});
$("#btnPinOk").addEventListener("click",()=>{if(($("#pinInput").value||"").trim()===EDIT_PIN){setEditOn(true); $("#overlayPin").style.display="none"; showToast("√âdition ON");} else alert("PIN incorrect.");});
$("#btnPinOff").addEventListener("click",()=>{setEditOn(false); $("#overlayPin").style.display="none"; showToast("√âdition OFF");});

$("#btnNew").addEventListener("click",openFormNew);
$("#btnCloseForm").addEventListener("click",closeForm);
$("#overlayForm").addEventListener("click",(e)=>{if(e.target.id==="overlayForm") closeForm();});
$("#btnAddIng").addEventListener("click",()=>addIngRow());
$("#autoMacros").addEventListener("change",()=>{updateMacroInputsLock(); recalcFormMacros();});
$("#btnSave").addEventListener("click",saveRecipe);

$("#photo").addEventListener("change",(e)=>{const file=e.target.files?.[0]; if(!file) return;
if(file.size>2.5*1024*1024){alert("Photo trop lourde."); e.target.value=""; return;}
const reader=new FileReader(); reader.onload=()=>{formPhoto=reader.result; renderFormPhoto();}; reader.readAsDataURL(file);
});
$("#btnRemovePhoto").addEventListener("click",()=>{formPhoto=null; $("#photo").value=""; renderFormPhoto();});

$("#btnOpenImport").addEventListener("click",openImport);
$("#btnCloseImport").addEventListener("click",closeImport);
$("#overlayImport").addEventListener("click",(e)=>{if(e.target.id==="overlayImport") closeImport();});
$("#importText").addEventListener("input",previewImport);
$("#btnDoImport").addEventListener("click",doImport);

$("#btnFoods").addEventListener("click",openFoods);
$("#btnCloseFoods").addEventListener("click",closeFoods);
$("#overlayFoods").addEventListener("click",(e)=>{if(e.target.id==="overlayFoods") closeFoods();});
$("#btnAddFood").addEventListener("click",addFood);

$("#btnEdit").addEventListener("click",()=>{if(!currentId) return; closeView(); openFormEdit(currentId);});
$("#btnDelete").addEventListener("click",deleteCurrent);

$("#btnReset").addEventListener("click",()=>{$("#q").value=""; $("#mainCat").value=""; $("#subCat").value=""; $("#diff").value=""; $("#sort").value="recent"; renderQuickSubs(); renderRecipes();});
["q","mainCat","subCat","diff","sort"].forEach(id=>{
  $("#"+id).addEventListener("input",()=>{ renderQuickSubs(); renderRecipes(); });
  $("#"+id).addEventListener("change",()=>{ renderQuickSubs(); renderRecipes(); });
});

// Init
renderSelectors();
setView("home");
setEditOn(isEditOn());
updateMacroInputsLock();
renderFormPhoto();
</script>
</body>
</html>
