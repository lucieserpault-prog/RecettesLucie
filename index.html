
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Recettes Premium V3</title>
<style>
body{font-family:Arial;background:#f8f6f2;padding:20px}
.card{background:white;padding:15px;border-radius:12px;margin-bottom:15px;box-shadow:0 5px 15px rgba(0,0,0,0.05)}
button{padding:8px 12px;border:none;border-radius:8px;background:#7c5cff;color:white;cursor:pointer}
textarea,input{width:100%;margin-bottom:10px;padding:8px;border-radius:8px;border:1px solid #ddd}
</style>
</head>
<body>

<h1>ðŸ“– Recettes Premium V3</h1>

<div class="card">
<h2>Importer recette (Word / Texte)</h2>
<textarea id="importText" rows="8" placeholder="Nom: ...&#10;IngrÃ©dients:&#10;1 oeuf&#10;150 g poulet&#10;Instructions:..."></textarea>
<button onclick="importRecipe()">Importer</button>
</div>

<div id="recipes"></div>

<script>
const FOODS = [{"id": "food_0", "name": "Poulet (blanc, cru)", "kcal": 120, "p": 23, "c": 0, "f": 2.6}, {"id": "food_1", "name": "Poulet (cuit)", "kcal": 165, "p": 31, "c": 0, "f": 3.6}, {"id": "food_2", "name": "Dinde", "kcal": 110, "p": 24, "c": 0, "f": 1.5}, {"id": "food_3", "name": "Boeuf 5%", "kcal": 137, "p": 21, "c": 0, "f": 5}, {"id": "food_4", "name": "Boeuf 15%", "kcal": 215, "p": 19, "c": 0, "f": 15}, {"id": "food_5", "name": "Steak hachÃ© 5%", "kcal": 137, "p": 21, "c": 0, "f": 5}, {"id": "food_6", "name": "Saumon", "kcal": 208, "p": 20, "c": 0, "f": 13}, {"id": "food_7", "name": "Saumon fumÃ©", "kcal": 117, "p": 18, "c": 0, "f": 4.3}, {"id": "food_8", "name": "Thon", "kcal": 116, "p": 26, "c": 0, "f": 1}, {"id": "food_9", "name": "Cabillaud", "kcal": 82, "p": 18, "c": 0, "f": 0.7}, {"id": "food_10", "name": "Crevettes", "kcal": 99, "p": 24, "c": 0.2, "f": 0.3}, {"id": "food_11", "name": "Sardines", "kcal": 208, "p": 25, "c": 0, "f": 11}, {"id": "food_12", "name": "Oeuf", "kcal": 143, "p": 13, "c": 1, "f": 10}, {"id": "food_13", "name": "Blanc d'oeuf", "kcal": 52, "p": 11, "c": 0.7, "f": 0.2}, {"id": "food_14", "name": "Jaune d'oeuf", "kcal": 322, "p": 16, "c": 3.6, "f": 27}, {"id": "food_15", "name": "Skyr", "kcal": 60, "p": 11, "c": 4, "f": 0.2}, {"id": "food_16", "name": "Fromage blanc 0%", "kcal": 46, "p": 8, "c": 4, "f": 0.2}, {"id": "food_17", "name": "Yaourt grec 0%", "kcal": 59, "p": 10, "c": 3.6, "f": 0.4}, {"id": "food_18", "name": "Mozzarella", "kcal": 280, "p": 19, "c": 2, "f": 22}, {"id": "food_19", "name": "Emmental", "kcal": 380, "p": 28, "c": 0, "f": 29}, {"id": "food_20", "name": "Parmesan", "kcal": 431, "p": 38, "c": 4, "f": 29}, {"id": "food_21", "name": "Riz cru", "kcal": 360, "p": 7, "c": 80, "f": 1}, {"id": "food_22", "name": "Riz cuit", "kcal": 130, "p": 2.7, "c": 28, "f": 0.3}, {"id": "food_23", "name": "Riz complet cru", "kcal": 370, "p": 7.5, "c": 77, "f": 2.8}, {"id": "food_24", "name": "PÃ¢tes crues", "kcal": 350, "p": 12, "c": 72, "f": 1.5}, {"id": "food_25", "name": "PÃ¢tes cuites", "kcal": 158, "p": 5.8, "c": 30, "f": 0.9}, {"id": "food_26", "name": "Quinoa cru", "kcal": 368, "p": 14, "c": 64, "f": 6}, {"id": "food_27", "name": "Quinoa cuit", "kcal": 120, "p": 4.4, "c": 21, "f": 1.9}, {"id": "food_28", "name": "Pain blanc", "kcal": 265, "p": 9, "c": 49, "f": 3.2}, {"id": "food_29", "name": "Pain complet", "kcal": 247, "p": 9, "c": 41, "f": 4.2}, {"id": "food_30", "name": "Wrap", "kcal": 310, "p": 8, "c": 52, "f": 7}, {"id": "food_31", "name": "Flocons d'avoine", "kcal": 389, "p": 17, "c": 66, "f": 7}, {"id": "food_32", "name": "Farine", "kcal": 364, "p": 10, "c": 76, "f": 1}, {"id": "food_33", "name": "Sucre", "kcal": 400, "p": 0, "c": 100, "f": 0}, {"id": "food_34", "name": "Miel", "kcal": 304, "p": 0.3, "c": 82, "f": 0}, {"id": "food_35", "name": "Chocolat noir", "kcal": 546, "p": 5, "c": 61, "f": 35}, {"id": "food_36", "name": "Beurre", "kcal": 717, "p": 1, "c": 0, "f": 81}, {"id": "food_37", "name": "Huile d'olive", "kcal": 884, "p": 0, "c": 0, "f": 100}, {"id": "food_38", "name": "Avocat", "kcal": 160, "p": 2, "c": 9, "f": 15}, {"id": "food_39", "name": "Banane", "kcal": 89, "p": 1, "c": 23, "f": 0.3}, {"id": "food_40", "name": "Pomme", "kcal": 52, "p": 0.3, "c": 14, "f": 0.2}, {"id": "food_41", "name": "Pomme de terre", "kcal": 77, "p": 2, "c": 17, "f": 0.1}, {"id": "food_42", "name": "Patate douce", "kcal": 86, "p": 1.6, "c": 20, "f": 0.1}, {"id": "food_43", "name": "Tomate", "kcal": 18, "p": 1, "c": 4, "f": 0.2}, {"id": "food_44", "name": "Courgette", "kcal": 17, "p": 1.2, "c": 3, "f": 0.3}, {"id": "food_45", "name": "Carotte", "kcal": 41, "p": 1, "c": 10, "f": 0.2}, {"id": "food_46", "name": "Brocoli", "kcal": 34, "p": 2.8, "c": 7, "f": 0.4}, {"id": "food_47", "name": "Epinards", "kcal": 23, "p": 2.9, "c": 1.4, "f": 0.4}, {"id": "food_48", "name": "Champignon", "kcal": 22, "p": 3.1, "c": 3.3, "f": 0.3}, {"id": "food_49", "name": "Lentilles cuites", "kcal": 116, "p": 9, "c": 20, "f": 0.4}, {"id": "food_50", "name": "Pois chiches", "kcal": 164, "p": 9, "c": 27, "f": 2.6}, {"id": "food_51", "name": "Haricots rouges", "kcal": 127, "p": 9, "c": 23, "f": 0.5}, {"id": "food_52", "name": "Tofu", "kcal": 120, "p": 13, "c": 2, "f": 7}, {"id": "food_53", "name": "Tempeh", "kcal": 193, "p": 20, "c": 9, "f": 11}, {"id": "food_54", "name": "Whey", "kcal": 400, "p": 80, "c": 8, "f": 6}, {"id": "food_55", "name": "Lait demi-Ã©crÃ©mÃ©", "kcal": 47, "p": 3.4, "c": 4.8, "f": 1.6}, {"id": "food_56", "name": "Lait d'amande", "kcal": 13, "p": 0.4, "c": 0.2, "f": 1.1}, {"id": "food_57", "name": "Lait de coco", "kcal": 190, "p": 2, "c": 3, "f": 19}];

let recipes = JSON.parse(localStorage.getItem("recipes_v3")||"[]");

function save(){localStorage.setItem("recipes_v3",JSON.stringify(recipes));}

function matchFood(name){
name=name.toLowerCase();
let matches=FOODS.filter(f=>f.name.toLowerCase().includes(name));
if(matches.length===1) return matches[0];
if(matches.length>1){
let options=matches.map((m,i)=>i+" - "+m.name).join("\n");
let choice=prompt("Plusieurs choix trouvÃ©s:\n"+options+"\nTape le numÃ©ro:");
if(choice!==null && matches[choice]) return matches[choice];
}
return null;
}

function parseIngredient(line){
line=line.toLowerCase();
if(line.includes("oeuf")) return {food:matchFood("oeuf"), grams:60};
let match=line.match(/([0-9]+)\s*g\s*(.*)/);
if(match){
let grams=parseInt(match[1]);
let name=match[2];
return {food:matchFood(name), grams:grams};
}
return null;
}

function importRecipe(){
let text=document.getElementById("importText").value;
let name=text.match(/nom:(.*)/i);
let ingredientsBlock=text.match(/ingrÃ©dients:(.*)instructions:/is);
let instructions=text.match(/instructions:(.*)/is);

name=name?name[1].trim():"Recette importÃ©e";
ingredientsBlock=ingredientsBlock?ingredientsBlock[1].trim():"";
instructions=instructions?instructions[1].trim():"";

let lines=ingredientsBlock.split("\n");
let ingredients=[];
let kcal=0,p=0,c=0,f=0;

lines.forEach(l=>{
let parsed=parseIngredient(l);
if(parsed && parsed.food){
ingredients.push(parsed);
kcal+=parsed.food.kcal*(parsed.grams/100);
p+=parsed.food.p*(parsed.grams/100);
c+=parsed.food.c*(parsed.grams/100);
f+=parsed.food.f*(parsed.grams/100);
}
});

recipes.unshift({name,ingredients,instructions,kcal:Math.round(kcal),p:Math.round(p),c:Math.round(c),f:Math.round(f)});
save();
render();
}

function render(){
let container=document.getElementById("recipes");
container.innerHTML="";
recipes.forEach(r=>{
container.innerHTML+=`
<div class="card">
<h3>${r.name}</h3>
<p>ðŸ”¥ ${r.kcal} kcal | ðŸ’ª ${r.p}g prot</p>
<p>${r.instructions}</p>
</div>
`;
});
}

render();
</script>
</body>
</html>
